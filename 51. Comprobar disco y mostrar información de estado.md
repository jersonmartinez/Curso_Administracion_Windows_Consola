# 51. Comprobar disco y mostrar informaciÃ³n de estado

## ðŸ” Â¿Alguna vez te has preguntado quÃ© tan saludable estÃ¡ tu disco duro?

> *"Un disco duro es como el corazÃ³n de tu computadora: si no lo cuidas, todo el sistema sufre"* - AnÃ³nimo

En el mundo de la administraciÃ³n de sistemas, la capacidad de diagnosticar y monitorear la salud de los discos duros es una habilidad crÃ­tica que puede prevenir pÃ©rdidas catastrÃ³ficas de datos. Â¿SabÃ­as que el 60% de las fallas de disco duro pueden ser predichas con herramientas de diagnÃ³stico avanzadas?

En este capÃ­tulo, aprenderÃ¡s tÃ©cnicas expertas para verificar la integridad de los discos, detectar problemas antes de que se conviertan en fallos crÃ­ticos y mantener un sistema de monitoreo proactivo que te convertirÃ¡ en un verdadero experto en diagnÃ³stico de almacenamiento.

---

## ðŸ“š Conceptos Fundamentales

### **Integridad del Disco**
Estado de salud fÃ­sica y lÃ³gica de una unidad de almacenamiento, incluyendo sectores, sistema de archivos y estructura de datos.

### **Sectores Defectuosos**
Ãreas del disco que han perdido su capacidad de almacenar datos de manera confiable, causando errores de lectura/escritura.

### **Sistema de Archivos**
Estructura lÃ³gica que organiza y gestiona los datos almacenados en el disco, como NTFS, FAT32 o exFAT.

### **SMART (Self-Monitoring, Analysis and Reporting Technology)**
Sistema de monitoreo integrado en los discos duros que detecta y reporta problemas de salud.

---

## ðŸ› ï¸ Comandos Principales


## ðŸ› ï¸ Comandos Principales y ExplicaciÃ³n

### **CHKDSK**
Comando nativo de Windows para verificar y reparar errores en el sistema de archivos y sectores defectuosos.
**Sintaxis bÃ¡sica:**
```
chkdsk [unidad:] [/F] [/R] [/X]
```
- `/F`: Corrige errores en el disco.
- `/R`: Localiza sectores defectuosos y recupera informaciÃ³n legible.
- `/X`: Fuerza el desmontaje del volumen antes de la comprobaciÃ³n.

### **WMIC**
Comando para acceder a informaciÃ³n detallada del hardware, incluyendo datos SMART de los discos.
**Sintaxis bÃ¡sica:**
```
wmic diskdrive get model,size,status,mediatype
wmic logicaldisk where "DeviceID='C:'" get size,freespace,status
```

### **POWERSHELL**
Permite ejecutar scripts avanzados para anÃ¡lisis detallado y monitoreo continuo de la salud de los discos.
**Ejemplo:**
```
Get-PhysicalDisk | Select-Object FriendlyName, OperationalStatus, HealthStatus
```

### **FSUTIL**
Herramienta avanzada para gestiÃ³n y diagnÃ³stico del sistema de archivos.
**Sintaxis bÃ¡sica:**
```
fsutil fsinfo ntfsinfo C:
fsutil volume diskfree C:
fsutil dirty query C:
```

---

## ðŸ’¡ Ejemplos PrÃ¡cticos

pause
### Ejemplo 1: VerificaciÃ³n BÃ¡sica de Disco
**PropÃ³sito**: Realizar una verificaciÃ³n bÃ¡sica de la integridad del sistema de archivos sin reparaciones automÃ¡ticas.

ðŸ“„ **Script:** [`verificacion_basica.bat`](scripts/51-comprobar-disco/verificacion_basica.bat)
ðŸ’¡ **Ejecuta:** Haz doble clic en el archivo o ejecÃºtalo desde la terminal con:
```batch
scripts\51-comprobar-disco\verificacion_basica.bat
```

pause
### Ejemplo 2: VerificaciÃ³n Completa con ReparaciÃ³n
**PropÃ³sito**: Realizar una verificaciÃ³n completa del disco incluyendo reparaciÃ³n automÃ¡tica de errores encontrados.

ðŸ“„ **Script:** [`verificacion_completa_reparacion.bat`](scripts/51-comprobar-disco/verificacion_completa_reparacion.bat)
ðŸ’¡ **Ejecuta:** Haz doble clic en el archivo o ejecÃºtalo desde la terminal con:
```batch
scripts\51-comprobar-disco\verificacion_completa_reparacion.bat
```

pause
### Ejemplo 3: AnÃ¡lisis SMART del Disco
**PropÃ³sito**: Obtener informaciÃ³n detallada sobre la salud del disco usando datos SMART integrados.

ðŸ“„ **Script:** [`analisis_smart.bat`](scripts/51-comprobar-disco/analisis_smart.bat)
ðŸ’¡ **Ejecuta:** Haz doble clic en el archivo o ejecÃºtalo desde la terminal con:
```batch
scripts\51-comprobar-disco\analisis_smart.bat
```

pause
### Ejemplo 4: VerificaciÃ³n de MÃºltiples Unidades
**PropÃ³sito**: Verificar la integridad de todas las unidades del sistema de manera sistemÃ¡tica.

ðŸ“„ **Script:** [`verificacion-mult-unidades.bat`](scripts/51-comprobar-disco/verificacion-mult-unidades.bat)
ðŸ’¡ **Ejecuta:** Haz doble clic en el archivo o ejecÃºtalo desde la terminal con:
```batch
scripts\51-comprobar-disco\verificacion-mult-unidades.bat
```

pause
### Ejemplo 5: AnÃ¡lisis Detallado del Sistema de Archivos
**PropÃ³sito**: Obtener informaciÃ³n detallada sobre el sistema de archivos y su estado actual.

ðŸ“„ **Script:** [`analisis_fsutil.bat`](scripts/51-comprobar-disco/analisis_fsutil.bat)
ðŸ’¡ **Ejecuta:** Haz doble clic en el archivo o ejecÃºtalo desde la terminal con:
```batch
scripts\51-comprobar-disco\analisis_fsutil.bat
```

pause
### Ejemplo 6: Monitoreo de Sectores Defectuosos
**PropÃ³sito**: Detectar y reportar sectores defectuosos en el disco para prevenir pÃ©rdida de datos.

ðŸ“„ **Script:** [`monitoreo_sectores_defectuosos.bat`](scripts/51-comprobar-disco/monitoreo_sectores_defectuosos.bat)
ðŸ’¡ **Ejecuta:** Haz doble clic en el archivo o ejecÃºtalo desde la terminal con:
```batch
scripts\51-comprobar-disco\monitoreo_sectores_defectuosos.bat
```

### **Ejemplo 7: VerificaciÃ³n Programada**
**PropÃ³sito**: Configurar verificaciones automÃ¡ticas del disco en horarios especÃ­ficos para mantenimiento preventivo.

```batch
@echo off
echo ðŸ“… VERIFICACIÃ“N PROGRAMADA
echo ===========================

echo.
echo â° Configurando verificaciÃ³n semanal automÃ¡tica...
schtasks /create /tn "Verificacion_Disco_Semanal" /tr "chkdsk C: /F /R" /sc weekly /d SUN /st 03:00 /ru SYSTEM

echo.
echo ðŸ“‹ Verificando tarea creada...
schtasks /query /tn "Verificacion_Disco_Semanal"

echo âœ… VerificaciÃ³n programada configurada
echo.
pause
```

### **Ejemplo 8: AnÃ¡lisis de Rendimiento del Disco**
**PropÃ³sito**: Evaluar el rendimiento del disco y detectar posibles cuellos de botella.

```batch
@echo off
echo ðŸ“ˆ ANÃLISIS DE RENDIMIENTO DEL DISCO
echo =====================================

echo.
echo ðŸ“Š InformaciÃ³n de rendimiento:
wmic logicaldisk get size,freespace,caption,mediatype,status

echo.
echo ðŸ” Verificando fragmentaciÃ³n:
defrag C: /A /V

echo.
echo ðŸ“ˆ EstadÃ­sticas de uso del disco:
fsutil volume diskfree C:

echo âœ… AnÃ¡lisis de rendimiento completado
echo.
pause
```

### **Ejemplo 9: VerificaciÃ³n de Integridad Avanzada**
**PropÃ³sito**: Realizar una verificaciÃ³n profunda del disco incluyendo anÃ¡lisis de metadatos y estructura.

```batch
@echo off
echo ðŸ”¬ VERIFICACIÃ“N DE INTEGRIDAD AVANZADA
echo ======================================

echo.
echo ðŸ” Fase 1: VerificaciÃ³n bÃ¡sica del sistema de archivos...
chkdsk C: /F

echo.
echo ðŸ”¬ Fase 2: VerificaciÃ³n de sectores fÃ­sicos...
chkdsk C: /R

echo.
echo ðŸ“Š Fase 3: AnÃ¡lisis de metadatos...
fsutil fsinfo ntfsinfo C:

echo.
echo ðŸ” Fase 4: VerificaciÃ³n de integridad de estructura...
fsutil dirty query C:

echo âœ… VerificaciÃ³n avanzada completada
echo.
pause
```

### **Ejemplo 10: Reporte Completo de Salud del Disco**
**PropÃ³sito**: Generar un reporte completo y detallado sobre la salud de todos los discos del sistema.

```batch
@echo off
echo ðŸ“‹ REPORTE COMPLETO DE SALUD DEL DISCO
echo ======================================

echo.
echo ðŸ“ Generando reporte completo...
echo Fecha: %date% %time% > "reporte_salud_disco.txt"
echo ================================ >> "reporte_salud_disco.txt"
echo REPORTE DE SALUD DE DISCOS >> "reporte_salud_disco.txt"
echo ================================ >> "reporte_salud_disco.txt"
echo. >> "reporte_salud_disco.txt"

echo ðŸ“Š INFORMACIÃ“N GENERAL DE DISCOS: >> "reporte_salud_disco.txt"
wmic logicaldisk get size,freespace,caption,mediatype,status >> "reporte_salud_disco.txt"
echo. >> "reporte_salud_disco.txt"

echo ðŸ” INFORMACIÃ“N SMART: >> "reporte_salud_disco.txt"
wmic diskdrive get model,status,mediatype,partitions,size,freespace >> "reporte_salud_disco.txt"
echo. >> "reporte_salud_disco.txt"

echo ðŸ“ˆ ANÃLISIS DE FRAGMENTACIÃ“N: >> "reporte_salud_disco.txt"
defrag C: /A /V >> "reporte_salud_disco.txt"
echo. >> "reporte_salud_disco.txt"

echo ðŸ”§ ESTADO DEL SISTEMA DE ARCHIVOS: >> "reporte_salud_disco.txt"
fsutil fsinfo ntfsinfo C: >> "reporte_salud_disco.txt"
echo. >> "reporte_salud_disco.txt"

echo âœ… Reporte guardado en: reporte_salud_disco.txt
echo.
pause
```

---

## ðŸš€ Scripts Avanzados

### **Script para GestiÃ³n Completa de DiagnÃ³stico de Discos**

```batch
@echo off
setlocal enabledelayedexpansion
title ðŸ” GESTOR COMPLETO DE DIAGNÃ“STICO DE DISCOS

:menu_principal
cls
echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘            ðŸ” GESTOR DE DIAGNÃ“STICO DE DISCOS ðŸ”             â•‘
echo â•‘                    Sistema de Monitoreo Avanzado             â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo [1] ðŸ” VerificaciÃ³n bÃ¡sica de discos
echo [2] ðŸ”§ VerificaciÃ³n completa con reparaciÃ³n
echo [3] ðŸ“Š AnÃ¡lisis SMART detallado
echo [4] ðŸ“… Configurar verificaciones programadas
echo [5] ðŸ“ˆ AnÃ¡lisis de rendimiento
echo [6] ðŸ”¬ VerificaciÃ³n de integridad avanzada
echo [7] ðŸ“Š Monitoreo continuo de salud
echo [8] ðŸ“‹ Generar reporte completo
echo [9] âš™ï¸ ConfiguraciÃ³n personalizada
echo [0] âŒ Salir
echo.
set /p opcion="Selecciona una opciÃ³n: "

if "%opcion%"=="1" goto verificacion_basica
if "%opcion%"=="2" goto verificacion_completa
if "%opcion%"=="3" goto analisis_smart
if "%opcion%"=="4" goto verificacion_programada
if "%opcion%"=="5" goto analisis_rendimiento
if "%opcion%"=="6" goto verificacion_avanzada
if "%opcion%"=="7" goto monitoreo_continuo
if "%opcion%"=="8" goto generar_reporte
if "%opcion%"=="9" goto configuracion
if "%opcion%"=="0" goto salir
goto menu_principal

:verificacion_basica
cls
echo.
echo ðŸ” VERIFICACIÃ“N BÃSICA DE DISCOS
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ” Verificando todas las unidades disponibles...
echo.

for %%d in (C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
    if exist %%d:\ (
        echo ðŸ“ Unidad %%d::
        echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        chkdsk %%d: /F
        echo.
    )
)

echo âœ… VerificaciÃ³n bÃ¡sica completada
pause
goto menu_principal

:verificacion_completa
cls
echo.
echo ðŸ”§ VERIFICACIÃ“N COMPLETA CON REPARACIÃ“N
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo âš ï¸  Esta operaciÃ³n realizarÃ¡ verificaciones profundas y reparaciones
echo.
set /p confirmar="Â¿Continuar? (S/N): "
if /i not "%confirmar%"=="S" goto menu_principal

echo.
echo ðŸ”§ Iniciando verificaciÃ³n completa...

for %%d in (C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
    if exist %%d:\ (
        echo ðŸ“ Verificando unidad %%d: con reparaciÃ³n...
        chkdsk %%d: /F /R /X
        echo.
    )
)

echo âœ… VerificaciÃ³n completa finalizada
pause
goto menu_principal

:analisis_smart
cls
echo.
echo ðŸ“Š ANÃLISIS SMART DETALLADO
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ” InformaciÃ³n general de discos:
wmic logicaldisk get size,freespace,caption,mediatype,status

echo.
echo ðŸ“Š InformaciÃ³n SMART detallada:
wmic diskdrive get model,status,mediatype,partitions,size,freespace

echo.
echo âš ï¸  AnÃ¡lisis de sectores defectuosos:
wmic diskdrive get model,status,mediatype,partitions,size,freespace /format:list

echo âœ… AnÃ¡lisis SMART completado
pause
goto menu_principal

:verificacion_programada
cls
echo.
echo ðŸ“… CONFIGURACIÃ“N DE VERIFICACIONES PROGRAMADAS
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo [1] VerificaciÃ³n semanal (Domingo 3:00 AM)
echo [2] VerificaciÃ³n mensual (Primer domingo 3:00 AM)
echo [3] VerificaciÃ³n personalizada
echo [4] Ver tareas programadas
echo [5] Eliminar tareas programadas
echo [6] Volver al menÃº principal
echo.
set /p opcion_prog="Selecciona una opciÃ³n: "

if "%opcion_prog%"=="1" goto verificacion_semanal
if "%opcion_prog%"=="2" goto verificacion_mensual
if "%opcion_prog%"=="3" goto verificacion_personalizada
if "%opcion_prog%"=="4" goto ver_tareas
if "%opcion_prog%"=="5" goto eliminar_tareas
if "%opcion_prog%"=="6" goto menu_principal
goto verificacion_programada

:verificacion_semanal
echo.
echo ðŸ“… Configurando verificaciÃ³n semanal...
schtasks /create /tn "Verificacion_Disco_Semanal" /tr "chkdsk C: /F /R" /sc weekly /d SUN /st 03:00 /ru SYSTEM
echo âœ… Tarea semanal configurada
pause
goto verificacion_programada

:verificacion_mensual
echo.
echo ðŸ“… Configurando verificaciÃ³n mensual...
schtasks /create /tn "Verificacion_Disco_Mensual" /tr "chkdsk C: /F /R" /sc monthly /d 1 /st 03:00 /ru SYSTEM
echo âœ… Tarea mensual configurada
pause
goto verificacion_programada

:verificacion_personalizada
echo.
set /p dias="DÃ­as entre verificaciones (ej: 7): "
set /p hora="Hora de ejecuciÃ³n (ej: 03:00): "
echo.
echo ðŸ“… Configurando verificaciÃ³n personalizada...
schtasks /create /tn "Verificacion_Disco_Personalizada" /tr "chkdsk C: /F /R" /sc daily /mo %dias% /st %hora% /ru SYSTEM
echo âœ… Tarea personalizada configurada
pause
goto verificacion_programada

:ver_tareas
echo.
echo ðŸ“‹ Tareas programadas de verificaciÃ³n:
schtasks /query | findstr "Verificacion"
pause
goto verificacion_programada

:eliminar_tareas
echo.
echo ðŸ—‘ï¸ Eliminando tareas de verificaciÃ³n...
schtasks /delete /tn "Verificacion_Disco_Semanal" /f 2>nul
schtasks /delete /tn "Verificacion_Disco_Mensual" /f 2>nul
schtasks /delete /tn "Verificacion_Disco_Personalizada" /f 2>nul
echo âœ… Tareas eliminadas
pause
goto verificacion_programada

:analisis_rendimiento
cls
echo.
echo ðŸ“ˆ ANÃLISIS DE RENDIMIENTO
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ“Š InformaciÃ³n de rendimiento de todas las unidades:

for %%d in (C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
    if exist %%d:\ (
        echo ðŸ“ Unidad %%d::
        echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        wmic logicaldisk where "DeviceID='%%d:'" get size,freespace,caption,mediatype,status
        echo.
        echo ðŸ“ˆ FragmentaciÃ³n:
        defrag %%d: /A /V
        echo.
    )
)

echo âœ… AnÃ¡lisis de rendimiento completado
pause
goto menu_principal

:verificacion_avanzada
cls
echo.
echo ðŸ”¬ VERIFICACIÃ“N DE INTEGRIDAD AVANZADA
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo âš ï¸  Esta operaciÃ³n realizarÃ¡ verificaciones profundas del sistema
echo.
set /p confirmar="Â¿Continuar? (S/N): "
if /i not "%confirmar%"=="S" goto menu_principal

echo.
echo ðŸ”¬ Iniciando verificaciÃ³n avanzada...

for %%d in (C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
    if exist %%d:\ (
        echo ðŸ“ Verificando unidad %%d: (Fase 1: Sistema de archivos)...
        chkdsk %%d: /F
        
        echo ðŸ“ Verificando unidad %%d: (Fase 2: Sectores fÃ­sicos)...
        chkdsk %%d: /R
        
        echo ðŸ“ Verificando unidad %%d: (Fase 3: Metadatos)...
        fsutil fsinfo ntfsinfo %%d:
        
        echo ðŸ“ Verificando unidad %%d: (Fase 4: Integridad)...
        fsutil dirty query %%d:
        echo.
    )
)

echo âœ… VerificaciÃ³n avanzada completada
pause
goto menu_principal

:monitoreo_continuo
cls
echo.
echo ðŸ“Š MONITOREO CONTINUO DE SALUD
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
set /p intervalo="Intervalo de monitoreo en minutos (ej: 60): "
set /p log_file="Archivo de log (ej: monitor_salud.log): "

echo.
echo ðŸ“Š Iniciando monitoreo continuo...
echo ðŸ”„ Intervalo: %intervalo% minutos
echo ðŸ“ Log: %log_file%
echo.
echo Presiona Ctrl+C para detener
echo.

:loop_monitoreo
echo [%date% %time%] Verificando salud de discos... >> "%log_file%"

for %%d in (C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
    if exist %%d:\ (
        echo ðŸ“ Unidad %%d:: >> "%log_file%"
        wmic logicaldisk where "DeviceID='%%d:'" get size,freespace,caption,mediatype,status >> "%log_file%"
        echo. >> "%log_file%"
    )
)

timeout /t %intervalo% /nobreak >nul
goto loop_monitoreo

:generar_reporte
cls
echo.
echo ðŸ“‹ GENERAR REPORTE COMPLETO
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
set /p nombre_reporte="Nombre del reporte (sin extensiÃ³n): "

echo Fecha: %date% %time% > "%nombre_reporte%.txt"
echo ================================ >> "%nombre_reporte%.txt"
echo REPORTE DE SALUD DE DISCOS >> "%nombre_reporte%.txt"
echo ================================ >> "%nombre_reporte%.txt"
echo. >> "%nombre_reporte%.txt"

echo ðŸ“Š INFORMACIÃ“N GENERAL: >> "%nombre_reporte%.txt"
wmic logicaldisk get size,freespace,caption,mediatype,status >> "%nombre_reporte%.txt"
echo. >> "%nombre_reporte%.txt"

echo ðŸ” INFORMACIÃ“N SMART: >> "%nombre_reporte%.txt"
wmic diskdrive get model,status,mediatype,partitions,size,freespace >> "%nombre_reporte%.txt"
echo. >> "%nombre_reporte%.txt"

echo ðŸ“ˆ ANÃLISIS DE FRAGMENTACIÃ“N: >> "%nombre_reporte%.txt"
defrag C: /A /V >> "%nombre_reporte%.txt"
echo. >> "%nombre_reporte%.txt"

echo ðŸ”§ ESTADO DEL SISTEMA DE ARCHIVOS: >> "%nombre_reporte%.txt"
fsutil fsinfo ntfsinfo C: >> "%nombre_reporte%.txt"
echo. >> "%nombre_reporte%.txt"

echo âœ… Reporte guardado como: %nombre_reporte%.txt
pause
goto menu_principal

:configuracion
cls
echo.
echo âš™ï¸ CONFIGURACIÃ“N PERSONALIZADA
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo [1] Configurar unidades a verificar
echo [2] Configurar horarios de verificaciÃ³n
echo [3] Configurar umbrales de alerta
echo [4] Volver al menÃº principal
echo.
set /p opcion_config="Selecciona una opciÃ³n: "

if "%opcion_config%"=="1" goto config_unidades
if "%opcion_config%"=="2" goto config_horarios
if "%opcion_config%"=="3" goto config_umbrales
if "%opcion_config%"=="4" goto menu_principal
goto configuracion

:config_unidades
echo.
set /p unidades_config="Unidades a verificar (ej: C,D,E): "
echo Unidades configuradas: %unidades_config%
pause
goto configuracion

:config_horarios
echo.
set /p hora_config="Hora de verificaciÃ³n (ej: 03:00): "
echo Hora configurada: %hora_config%
pause
goto configuracion

:config_umbrales
echo.
set /p umbral_config="Umbral de espacio libre (GB): "
echo Umbral configurado: %umbral_config% GB
pause
goto configuracion

:salir
echo.
echo ðŸ‘‹ Â¡Gracias por usar el Gestor de DiagnÃ³stico de Discos!
echo.
exit /b 0
```

### **Script para Sistema de Monitoreo Proactivo de Salud de Discos**

```batch
@echo off
setlocal enabledelayedexpansion
title ðŸ›¡ï¸ SISTEMA DE MONITOREO PROACTIVO DE SALUD DE DISCOS

:configuracion_inicial
cls
echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘      ðŸ›¡ï¸ SISTEMA DE MONITOREO PROACTIVO DE SALUD DE DISCOS ðŸ›¡ï¸ â•‘
echo â•‘                    DetecciÃ³n Temprana de Problemas            â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
set /p umbral_espacio="Umbral de espacio libre (GB): "
set /p intervalo_monitoreo="Intervalo de monitoreo (minutos): "
set /p log_file="Archivo de log: "

echo.
echo âš™ï¸ ConfiguraciÃ³n del sistema:
echo    Umbral de espacio libre: %umbral_espacio% GB
echo    Intervalo de monitoreo: %intervalo_monitoreo% minutos
echo    Archivo de log: %log_file%
echo.
pause

:sistema_proactivo
cls
echo.
echo ðŸ›¡ï¸ SISTEMA PROACTIVO ACTIVO
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ”„ Monitoreando cada %intervalo_monitoreo% minutos...
echo ðŸ“ Registrando en: %log_file%
echo.
echo Presiona Ctrl+C para detener
echo.

:loop_proactivo
echo [%date% %time%] Iniciando ciclo de monitoreo proactivo... >> "%log_file%"

for %%d in (C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
    if exist %%d:\ (
        echo ðŸ“ Analizando unidad %%d:... >> "%log_file%"
        
        REM Verificar espacio libre
        for /f "tokens=3" %%f in ('dir %%d:\ /-c ^| findstr "bytes free"') do (
            set "espacio_libre=%%f"
            set /a "espacio_gb=!espacio_libre!/1073741824"
            
            if !espacio_gb! lss %umbral_espacio% (
                echo âš ï¸  ALERTA: Unidad %%d: espacio bajo (!espacio_gb! GB) >> "%log_file%"
                echo ðŸ§¹ Iniciando limpieza automÃ¡tica... >> "%log_file%"
                call :limpieza_automatica %%d
            ) else (
                echo âœ… Unidad %%d: espacio normal (!espacio_gb! GB) >> "%log_file%"
            )
        )
        
        REM Verificar estado del disco
        for /f "tokens=2" %%i in ('wmic logicaldisk where "DeviceID='%%d:'" get status /value ^| findstr "Status"') do (
            set "estado_disco=%%i"
            
            if not "!estado_disco!"=="OK" (
                echo âš ï¸  ALERTA: Unidad %%d: estado anormal (!estado_disco!) >> "%log_file%"
                echo ðŸ”§ Iniciando verificaciÃ³n automÃ¡tica... >> "%log_file%"
                chkdsk %%d: /F
            ) else (
                echo âœ… Unidad %%d: estado normal >> "%log_file%"
            )
        )
        
        echo. >> "%log_file%"
    )
)

echo [%date% %time%] Ciclo completado. Esperando %intervalo_monitoreo% minutos... >> "%log_file%"
echo. >> "%log_file%"

timeout /t %intervalo_monitoreo% /nobreak >nul
goto loop_proactivo

:limpieza_automatica
set "unidad=%1"
echo ðŸ“ Limpiando archivos temporales en %unidad%:... >> "%log_file%"
del /q /f /s "%TEMP%\*.*" 2>nul
del /q /f /s "%TMP%\*.*" 2>nul
del /q /f /s "%USERPROFILE%\AppData\Local\Temp\*.*" 2>nul
echo âœ… Limpieza automÃ¡tica completada >> "%log_file%"
goto :eof
```

---

## ðŸ’¡ Consejos Importantes

### **DiagnÃ³stico**
- **VerificaciÃ³n Regular**: Programa verificaciones automÃ¡ticas para detectar problemas temprano
- **AnÃ¡lisis SMART**: Utiliza datos SMART para predecir fallas de disco
- **Monitoreo Continuo**: Establece sistemas de alerta para cambios en la salud del disco

### **Seguridad**
- **Respaldo**: Siempre haz respaldo antes de realizar verificaciones profundas
- **VerificaciÃ³n Gradual**: Realiza verificaciones en etapas para evitar interrupciones
- **Permisos**: AsegÃºrate de tener permisos de administrador para verificaciones del sistema

### **Mejores PrÃ¡cticas**
- **DocumentaciÃ³n**: MantÃ©n registros detallados de todas las verificaciones realizadas
- **AnÃ¡lisis de Tendencias**: Monitorea cambios en el rendimiento del disco a lo largo del tiempo
- **Mantenimiento Preventivo**: Establece un calendario de verificaciones preventivas

---

## ðŸŒ Casos de Uso Reales

### **AdministraciÃ³n de Sistemas**
- **Mantenimiento Preventivo**: VerificaciÃ³n programada en servidores para prevenir fallas
- **DiagnÃ³stico de Problemas**: AnÃ¡lisis de discos para identificar causas de lentitud
- **GestiÃ³n de Almacenamiento**: Monitoreo de espacio y salud en servidores de archivos

### **Entornos Educativos**
- **Mantenimiento de Laboratorios**: VerificaciÃ³n automÃ¡tica de equipos en aulas de informÃ¡tica
- **GestiÃ³n de Proyectos**: Monitoreo de unidades de almacenamiento de proyectos
- **PrevenciÃ³n de PÃ©rdida de Datos**: VerificaciÃ³n regular en equipos de estudiantes

### **Empresas**
- **Mantenimiento de Estaciones de Trabajo**: VerificaciÃ³n automatizada en equipos corporativos
- **GestiÃ³n de Servidores**: Monitoreo y verificaciÃ³n de servidores crÃ­ticos
- **Cumplimiento**: VerificaciÃ³n regular para cumplir con polÃ­ticas de mantenimiento

---

## ðŸŽ¯ ConclusiÃ³n y Siguiente Paso

Â¡Excelente trabajo! Has dominado las tÃ©cnicas avanzadas de diagnÃ³stico y verificaciÃ³n de la salud de los discos, transformÃ¡ndote en un experto en el mantenimiento preventivo de sistemas de almacenamiento. La capacidad de detectar problemas antes de que se conviertan en fallos crÃ­ticos es una habilidad fundamental que te distinguirÃ¡ como administrador de sistemas.

En el prÃ³ximo capÃ­tulo, **"52. Formatear discos"**, aprenderÃ¡s tÃ©cnicas avanzadas de formateo y preparaciÃ³n de unidades de almacenamiento. DescubrirÃ¡s cÃ³mo configurar discos para diferentes usos, cÃ³mo optimizar el rendimiento desde el inicio y cÃ³mo manejar diferentes sistemas de archivos.

**Â¿EstÃ¡s listo para convertirte en un experto en preparaciÃ³n de discos?** ðŸš€

---

## ðŸ“š Enlaces Relacionados

- [CapÃ­tulo 30: InformaciÃ³n del sistema](30.%20InformaciÃ³n%20del%20sistema.md)
- [CapÃ­tulo 50: Optimizar y desfragmentar disco](50.%20Optimizar%20y%20desfragmentar%20disco.md)
- [CapÃ­tulo 52: Formatear discos](52.%20Formatear%20discos.md)

---

## ðŸ“– Fuentes y Referencias

- **Microsoft Docs**: [Chkdsk Command](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/chkdsk)
- **Windows Command Line**: [WMIC Disk Commands](https://docs.microsoft.com/en-us/windows/win32/wmisdk/wmic)
- **PowerShell Documentation**: [Storage Management](https://docs.microsoft.com/en-us/powershell/module/storage/)
- **Windows Sysinternals**: [Disk Analysis Tools](https://docs.microsoft.com/en-us/sysinternals/)

---

**Autor**: Jerson MartÃ­nez  
**Sitio Web**: [jersonmartinez.com](https://jersonmartinez.com)  
**Blog DevOps**: [crashell.com](https://crashell.com)  
**Fecha**: 2024 del /q /f /s "%TMP%\*.*" 2>nul
