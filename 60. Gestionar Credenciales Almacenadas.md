# 🔐 Gestionar Credenciales Almacenadas

> *"Las credenciales son las llaves del reino digital. Gestionarlas correctamente es la diferencia entre la seguridad y la vulnerabilidad"* - **Principio fundamental de la gestión de identidades**

## 📋 Introducción

¿Te has preguntado alguna vez dónde Windows almacena todas las contraseñas y credenciales que introduces? ¿Cómo los administradores de sistemas gestionan miles de credenciales de forma segura? En este capítulo, exploraremos las técnicas avanzadas para gestionar credenciales almacenadas en Windows.

La gestión de credenciales es fundamental en cualquier entorno de seguridad. Aprenderemos a utilizar herramientas nativas de Windows y scripts avanzados para administrar, auditar y proteger las credenciales almacenadas del sistema.

## 🎯 Conceptos Clave

### **Credenciales Almacenadas**
Información de autenticación (usuarios, contraseñas, certificados) guardada en el sistema para uso posterior.

### **Administrador de Credenciales**
Servicio de Windows que almacena y gestiona credenciales de forma segura.

### **Cifrado de Credenciales**
Proceso de protección de credenciales mediante algoritmos criptográficos.

### **Política de Gestión de Contraseñas**
Conjunto de reglas que definen cómo se crean, almacenan y gestionan las contraseñas.

## 🛠️ Comandos Principales

### **CMDKEY**
```batch
CMDKEY /LIST
```
Gestiona credenciales almacenadas en el sistema.

### **POWERSHELL Get-StoredCredential**
```powershell
Get-StoredCredential -Target "servidor"
```
Recupera credenciales almacenadas usando PowerShell.

### **REG QUERY**
```batch
REG QUERY "HKCU\Software\Microsoft\Windows\CurrentVersion\Credentials"
```
Consulta credenciales almacenadas en el registro.

### **CERTUTIL**
```batch
CERTUTIL -STORE MY
```
Gestiona certificados digitales del sistema.

## 💡 Ejemplos Prácticos

### **Ejemplo 1: Listar credenciales almacenadas**
**Propósito**: Mostrar todas las credenciales almacenadas en el sistema para auditoría y gestión.

```batch
@echo off
echo ========================================
echo    LISTAR CREDENCIALES ALMACENADAS
echo ========================================
echo.

REM Configuración
set "log_file=credenciales_almacenadas.log"

echo Listando credenciales almacenadas...
echo Listado iniciado: %date% %time% > %log_file%

REM Listar credenciales usando CMDKEY
echo === CREDENCIALES ALMACENADAS === >> %log_file%
cmdkey /list >> %log_file%

REM Consultar credenciales en el registro
echo === CREDENCIALES EN REGISTRO === >> %log_file%
reg query "HKCU\Software\Microsoft\Windows\CurrentVersion\Credentials" >> %log_file%

REM Listar certificados del usuario
echo === CERTIFICADOS DEL USUARIO === >> %log_file%
certutil -store -user MY >> %log_file%

REM Listar certificados del sistema
echo === CERTIFICADOS DEL SISTEMA === >> %log_file%
certutil -store MY >> %log_file%

echo Listado de credenciales completado
echo Log guardado en: %log_file%
pause
```

### **Ejemplo 2: Agregar credenciales de red**
**Propósito**: Agregar credenciales para acceder a recursos de red de forma segura.

```batch
@echo off
echo ========================================
echo    AGREGAR CREDENCIALES DE RED
echo ========================================
echo.

REM Configuración
set "servidor=servidor-empresa"
set "usuario=usuario_red"
set "log_file=agregar_credenciales.log"

echo Agregando credenciales para %servidor%...
echo Agregar credenciales iniciado: %date% %time% > %log_file%

REM Solicitar contraseña de forma segura
set /p password="Ingrese la contraseña: "

REM Agregar credenciales usando CMDKEY
echo Agregando credenciales para %servidor%... >> %log_file%
cmdkey /add:%servidor% /user:%usuario% /pass:%password% >> %log_file% 2>&1

REM Verificar que se agregaron correctamente
echo Verificando credenciales agregadas... >> %log_file%
cmdkey /list | findstr %servidor% >> %log_file%

if %errorlevel%==0 (
    echo [EXITO] Credenciales agregadas correctamente
) else (
    echo [ERROR] Error al agregar credenciales
)

echo Agregar credenciales completado
echo Log guardado en: %log_file%
pause
```

### **Ejemplo 3: Eliminar credenciales específicas**
**Propósito**: Eliminar credenciales específicas del sistema por motivos de seguridad.

```batch
@echo off
echo ========================================
echo    ELIMINAR CREDENCIALES ESPECIFICAS
echo ========================================
echo.

REM Configuración
set "servidor=servidor-antiguo"
set "log_file=eliminar_credenciales.log"

echo Eliminando credenciales para %servidor%...
echo Eliminar credenciales iniciado: %date% %time% > %log_file%

REM Verificar si existen las credenciales
echo Verificando existencia de credenciales... >> %log_file%
cmdkey /list | findstr %servidor% >> %log_file%

if %errorlevel%==0 (
    REM Eliminar credenciales
    echo Eliminando credenciales... >> %log_file%
    cmdkey /delete:%servidor% >> %log_file% 2>&1
    
    REM Verificar eliminación
    echo Verificando eliminacion... >> %log_file%
    cmdkey /list | findstr %servidor% >> %log_file%
    
    if %errorlevel%==1 (
        echo [EXITO] Credenciales eliminadas correctamente
    ) else (
        echo [ERROR] Error al eliminar credenciales
    )
) else (
    echo [INFO] No se encontraron credenciales para eliminar
)

echo Eliminar credenciales completado
echo Log guardado en: %log_file%
pause
```

### **Ejemplo 4: Backup de credenciales**
**Propósito**: Crear backup de credenciales almacenadas para recuperación en caso de emergencia.

```batch
@echo off
echo ========================================
echo    BACKUP DE CREDENCIALES
echo ========================================
echo.

REM Configuración
set "backup_dir=D:\Backups\Credenciales"
set "fecha=%date:~-4,4%%date:~-10,2%%date:~-7,2%"
set "log_file=backup_credenciales.log"

echo Creando backup de credenciales...
echo Backup iniciado: %date% %time% > %log_file%

REM Crear directorio de backup
if not exist "%backup_dir%\%fecha%" mkdir "%backup_dir%\%fecha%"

REM Exportar credenciales del registro
echo Exportando credenciales del registro... >> %log_file%
reg export "HKCU\Software\Microsoft\Windows\CurrentVersion\Credentials" "%backup_dir%\%fecha%\credenciales.reg" /y >> %log_file%

REM Exportar certificados del usuario
echo Exportando certificados del usuario... >> %log_file%
certutil -store -user MY "%backup_dir%\%fecha%\certificados_usuario.txt" >> %log_file%

REM Exportar certificados del sistema
echo Exportando certificados del sistema... >> %log_file%
certutil -store MY "%backup_dir%\%fecha%\certificados_sistema.txt" >> %log_file%

REM Listar credenciales almacenadas
echo Listando credenciales almacenadas... >> %log_file%
cmdkey /list > "%backup_dir%\%fecha%\credenciales_lista.txt" 2>&1

REM Crear archivo de resumen
echo RESUMEN DE BACKUP > "%backup_dir%\%fecha%\resumen.txt"
echo Fecha: %date% %time% >> "%backup_dir%\%fecha%\resumen.txt"
echo Usuario: %USERNAME% >> "%backup_dir%\%fecha%\resumen.txt"
echo Sistema: %COMPUTERNAME% >> "%backup_dir%\%fecha%\resumen.txt"

echo Backup de credenciales completado
echo Log guardado en: %log_file%
pause
```

### **Ejemplo 5: Restaurar credenciales desde backup**
**Propósito**: Restaurar credenciales desde un backup previo en caso de pérdida o corrupción.

```batch
@echo off
echo ========================================
echo    RESTAURAR CREDENCIALES DESDE BACKUP
echo ========================================
echo.

REM Configuración
set "backup_dir=D:\Backups\Credenciales"
set "fecha=%date:~-4,4%%date:~-10,2%%date:~-7,2%"
set "log_file=restaurar_credenciales.log"

echo Restaurando credenciales desde backup...
echo Restauracion iniciada: %date% %time% > %log_file%

REM Verificar existencia del backup
if exist "%backup_dir%\%fecha%" (
    echo Backup encontrado: %backup_dir%\%fecha% >> %log_file%
    
    REM Restaurar credenciales del registro
    if exist "%backup_dir%\%fecha%\credenciales.reg" (
        echo Restaurando credenciales del registro... >> %log_file%
        reg import "%backup_dir%\%fecha%\credenciales.reg" >> %log_file% 2>&1
    )
    
    REM Restaurar certificados
    if exist "%backup_dir%\%fecha%\certificados_usuario.txt" (
        echo Restaurando certificados del usuario... >> %log_file%
        certutil -store -user MY "%backup_dir%\%fecha%\certificados_usuario.txt" >> %log_file% 2>&1
    )
    
    echo [EXITO] Restauracion de credenciales completada
) else (
    echo [ERROR] Backup no encontrado: %backup_dir%\%fecha%
)

echo Restauracion de credenciales completada
echo Log guardado en: %log_file%
pause
```

### **Ejemplo 6: Auditoría de credenciales**
**Propósito**: Realizar una auditoría completa de las credenciales almacenadas para detectar configuraciones inseguras.

```batch
@echo off
echo ========================================
echo    AUDITORIA DE CREDENCIALES
echo ========================================
echo.

REM Configuración
set "log_file=auditoria_credenciales.log"

echo Iniciando auditoria de credenciales...
echo Auditoria iniciada: %date% %time% > %log_file%

REM Listar todas las credenciales
echo === CREDENCIALES ALMACENADAS === >> %log_file%
cmdkey /list >> %log_file%

REM Verificar credenciales del registro
echo === CREDENCIALES EN REGISTRO === >> %log_file%
reg query "HKCU\Software\Microsoft\Windows\CurrentVersion\Credentials" >> %log_file%

REM Verificar certificados expirados
echo === CERTIFICADOS EXPIRADOS === >> %log_file%
certutil -store -user MY | findstr "Expired" >> %log_file%

REM Verificar certificados del sistema expirados
echo === CERTIFICADOS DEL SISTEMA EXPIRADOS === >> %log_file%
certutil -store MY | findstr "Expired" >> %log_file%

REM Verificar políticas de contraseñas
echo === POLITICAS DE CONTRASEÑAS === >> %log_file%
net accounts >> %log_file%

REM Verificar historial de contraseñas
echo === HISTORIAL DE CONTRASEÑAS === >> %log_file%
reg query "HKLM\SYSTEM\CurrentControlSet\Services\Netlogon\Parameters" /v "PasswordHistory" >> %log_file%

echo Auditoria de credenciales completada
echo Log guardado en: %log_file%
pause
```

### **Ejemplo 7: Limpiar credenciales expiradas**
**Propósito**: Eliminar credenciales y certificados expirados para mantener la seguridad del sistema.

```batch
@echo off
echo ========================================
echo    LIMPIAR CREDENCIALES EXPIRADAS
echo ========================================
echo.

REM Configuración
set "log_file=limpiar_credenciales.log"

echo Limpiando credenciales expiradas...
echo Limpieza iniciada: %date% %time% > %log_file%

REM Listar certificados expirados del usuario
echo === CERTIFICADOS EXPIRADOS DEL USUARIO === >> %log_file%
certutil -store -user MY | findstr "Expired" >> %log_file%

REM Listar certificados expirados del sistema
echo === CERTIFICADOS EXPIRADOS DEL SISTEMA === >> %log_file%
certutil -store MY | findstr "Expired" >> %log_file%

REM Eliminar certificados expirados del usuario
echo Eliminando certificados expirados del usuario... >> %log_file%
for /f "tokens=*" %%c in ('certutil -store -user MY ^| findstr "Expired"') do (
    echo Eliminando certificado: %%c >> %log_file%
    certutil -delstore -user MY "%%c" >> %log_file% 2>&1
)

REM Eliminar certificados expirados del sistema
echo Eliminando certificados expirados del sistema... >> %log_file%
for /f "tokens=*" %%c in ('certutil -store MY ^| findstr "Expired"') do (
    echo Eliminando certificado: %%c >> %log_file%
    certutil -delstore MY "%%c" >> %log_file% 2>&1
)

echo Limpieza de credenciales completada
echo Log guardado en: %log_file%
pause
```

### **Ejemplo 8: Gestionar credenciales de servicios**
**Propósito**: Gestionar credenciales utilizadas por servicios del sistema de forma segura.

```batch
@echo off
echo ========================================
echo    GESTIONAR CREDENCIALES DE SERVICIOS
echo ========================================
echo.

REM Configuración
set "log_file=credenciales_servicios.log"

echo Gestionando credenciales de servicios...
echo Gestion iniciada: %date% %time% > %log_file%

REM Listar servicios que usan credenciales específicas
echo === SERVICIOS CON CREDENCIALES ESPECIFICAS === >> %log_file%
wmic service get name,startname,state | findstr /v "LocalSystem" >> %log_file%

REM Verificar servicios que se ejecutan como usuario
echo === SERVICIOS EJECUTANDOSE COMO USUARIO === >> %log_file%
wmic service where "startname!='LocalSystem'" get name,startname,state >> %log_file%

REM Verificar servicios con credenciales almacenadas
echo === SERVICIOS CON CREDENCIALES ALMACENADAS === >> %log_file%
sc query type= service state= all | findstr "SERVICE_NAME" >> %log_file%

REM Verificar configuración de servicios críticos
echo === CONFIGURACION DE SERVICIOS CRITICOS === >> %log_file%
for %%s in (spooler eventlog themes) do (
    echo Verificando %%s... >> %log_file%
    sc qc %%s >> %log_file%
)

echo Gestion de credenciales de servicios completada
echo Log guardado en: %log_file%
pause
```

### **Ejemplo 9: Exportar credenciales para migración**
**Propósito**: Exportar credenciales de forma segura para migración a otro sistema.

```batch
@echo off
echo ========================================
echo    EXPORTAR CREDENCIALES PARA MIGRACION
echo ========================================
echo.

REM Configuración
set "export_dir=D:\Export\Credenciales"
set "fecha=%date:~-4,4%%date:~-10,2%%date:~-7,2%"
set "log_file=exportar_credenciales.log"

echo Exportando credenciales para migracion...
echo Exportacion iniciada: %date% %time% > %log_file%

REM Crear directorio de exportación
if not exist "%export_dir%\%fecha%" mkdir "%export_dir%\%fecha%"

REM Exportar credenciales del registro
echo Exportando credenciales del registro... >> %log_file%
reg export "HKCU\Software\Microsoft\Windows\CurrentVersion\Credentials" "%export_dir%\%fecha%\credenciales.reg" /y >> %log_file%

REM Exportar certificados del usuario
echo Exportando certificados del usuario... >> %log_file%
certutil -store -user MY "%export_dir%\%fecha%\certificados_usuario.txt" >> %log_file%

REM Exportar certificados del sistema
echo Exportando certificados del sistema... >> %log_file%
certutil -store MY "%export_dir%\%fecha%\certificados_sistema.txt" >> %log_file%

REM Crear script de importación
echo @echo off > "%export_dir%\%fecha%\importar_credenciales.bat"
echo echo Importando credenciales... >> "%export_dir%\%fecha%\importar_credenciales.bat"
echo reg import "%%~dp0credenciales.reg" >> "%export_dir%\%fecha%\importar_credenciales.bat"
echo echo Credenciales importadas correctamente >> "%export_dir%\%fecha%\importar_credenciales.bat"
echo pause >> "%export_dir%\%fecha%\importar_credenciales.bat"

REM Crear archivo de documentación
echo DOCUMENTACION DE MIGRACION > "%export_dir%\%fecha%\README.txt"
echo ======================================== >> "%export_dir%\%fecha%\README.txt"
echo Fecha de exportacion: %date% %time% >> "%export_dir%\%fecha%\README.txt"
echo Sistema origen: %COMPUTERNAME% >> "%export_dir%\%fecha%\README.txt"
echo Usuario: %USERNAME% >> "%export_dir%\%fecha%\README.txt"
echo. >> "%export_dir%\%fecha%\README.txt"
echo INSTRUCCIONES: >> "%export_dir%\%fecha%\README.txt"
echo 1. Copiar todos los archivos al sistema destino >> "%export_dir%\%fecha%\README.txt"
echo 2. Ejecutar importar_credenciales.bat como administrador >> "%export_dir%\%fecha%\README.txt"
echo 3. Verificar que las credenciales se importaron correctamente >> "%export_dir%\%fecha%\README.txt"

echo Exportacion de credenciales completada
echo Log guardado en: %log_file%
pause
```

### **Ejemplo 10: Verificar integridad de credenciales**
**Propósito**: Verificar la integridad y validez de las credenciales almacenadas en el sistema.

```batch
@echo off
echo ========================================
echo    VERIFICAR INTEGRIDAD DE CREDENCIALES
echo ========================================
echo.

REM Configuración
set "log_file=verificar_integridad.log"

echo Verificando integridad de credenciales...
echo Verificacion iniciada: %date% %time% > %log_file%

REM Verificar credenciales almacenadas
echo === VERIFICACION DE CREDENCIALES ALMACENADAS === >> %log_file%
cmdkey /list >> %log_file%

REM Verificar integridad del registro de credenciales
echo === VERIFICACION DE INTEGRIDAD DEL REGISTRO === >> %log_file%
reg query "HKCU\Software\Microsoft\Windows\CurrentVersion\Credentials" >> %log_file%

REM Verificar certificados válidos
echo === VERIFICACION DE CERTIFICADOS VALIDOS === >> %log_file%
certutil -store -user MY | findstr "Valid" >> %log_file%

REM Verificar certificados del sistema válidos
echo === VERIFICACION DE CERTIFICADOS DEL SISTEMA === >> %log_file%
certutil -store MY | findstr "Valid" >> %log_file%

REM Verificar políticas de seguridad
echo === VERIFICACION DE POLITICAS DE SEGURIDAD === >> %log_file%
secedit /export /cfg "%temp%\security_policy.inf" >> %log_file% 2>&1
findstr /i "password" "%temp%\security_policy.inf" >> %log_file%

REM Limpiar archivo temporal
del "%temp%\security_policy.inf" 2>nul

echo Verificacion de integridad completada
echo Log guardado en: %log_file%
pause
```

## 🔧 Scripts Avanzados

### **Script para Gestión Completa de Credenciales**

```batch
@echo off
setlocal enabledelayedexpansion
title GESTION COMPLETA DE CREDENCIALES

echo ========================================
echo  GESTION COMPLETA DE CREDENCIALES
echo ========================================
echo.

REM Configuración
set "log_dir=C:\Logs\Credenciales"
set "fecha=%date:~-4,4%%date:~-10,2%%date:~-7,2%"

REM Crear directorio de logs
if not exist "%log_dir%" mkdir "%log_dir%"

:menu_principal
cls
echo ========================================
echo    GESTION COMPLETA DE CREDENCIALES
echo ========================================
echo.
echo 1. Listar credenciales almacenadas
echo 2. Agregar credenciales de red
echo 3. Eliminar credenciales especificas
echo 4. Backup de credenciales
echo 5. Restaurar credenciales
echo 6. Auditoria de credenciales
echo 7. Limpiar credenciales expiradas
echo 8. Gestionar credenciales de servicios
echo 9. Exportar credenciales
echo 10. Verificar integridad
echo 11. Generar reporte completo
echo 12. Salir
echo.
set /p opcion="Seleccione una opcion: "

if "%opcion%"=="1" goto listar_credenciales
if "%opcion%"=="2" goto agregar_credenciales
if "%opcion%"=="3" goto eliminar_credenciales
if "%opcion%"=="4" goto backup_credenciales
if "%opcion%"=="5" goto restaurar_credenciales
if "%opcion%"=="6" goto auditoria_credenciales
if "%opcion%"=="7" goto limpiar_credenciales
if "%opcion%"=="8" goto gestion_servicios
if "%opcion%"=="9" goto exportar_credenciales
if "%opcion%"=="10" goto verificar_integridad
if "%opcion%"=="11" goto generar_reporte
if "%opcion%"=="12" goto salir
goto menu_principal

:listar_credenciales
echo.
echo === LISTAR CREDENCIALES ALMACENADAS ===
echo.
set "log_file=%log_dir%\listar_%fecha%.log"

echo Listando credenciales...
echo Listado iniciado: %date% %time% > %log_file%

cmdkey /list >> %log_file%
reg query "HKCU\Software\Microsoft\Windows\CurrentVersion\Credentials" >> %log_file%

echo Listado completado
pause
goto menu_principal

:agregar_credenciales
echo.
echo === AGREGAR CREDENCIALES DE RED ===
echo.
set /p servidor="Ingrese el nombre del servidor: "
set /p usuario="Ingrese el nombre de usuario: "
set /p password="Ingrese la contraseña: "

cmdkey /add:%servidor% /user:%usuario% /pass:%password%

echo Credenciales agregadas
pause
goto menu_principal

:eliminar_credenciales
echo.
echo === ELIMINAR CREDENCIALES ESPECIFICAS ===
echo.
set /p servidor="Ingrese el nombre del servidor: "

cmdkey /delete:%servidor%

echo Credenciales eliminadas
pause
goto menu_principal

:backup_credenciales
echo.
echo === BACKUP DE CREDENCIALES ===
echo.
set "backup_dir=D:\Backups\Credenciales"
set "log_file=%log_dir%\backup_%fecha%.log"

echo Creando backup...
echo Backup iniciado: %date% %time% > %log_file%

if not exist "%backup_dir%\%fecha%" mkdir "%backup_dir%\%fecha%"
reg export "HKCU\Software\Microsoft\Windows\CurrentVersion\Credentials" "%backup_dir%\%fecha%\credenciales.reg" /y >> %log_file%

echo Backup completado
pause
goto menu_principal

:restaurar_credenciales
echo.
echo === RESTAURAR CREDENCIALES ===
echo.
set /p backup="Ingrese ruta del archivo de backup: "

if exist "!backup!" (
    reg import "!backup!"
    echo Credenciales restauradas
) else (
    echo Archivo de backup no encontrado
)
pause
goto menu_principal

:auditoria_credenciales
echo.
echo === AUDITORIA DE CREDENCIALES ===
echo.
set "log_file=%log_dir%\auditoria_%fecha%.log"

echo Auditando credenciales...
echo Auditoria iniciada: %date% %time% > %log_file%

cmdkey /list >> %log_file%
certutil -store -user MY | findstr "Expired" >> %log_file%
net accounts >> %log_file%

echo Auditoria completada
pause
goto menu_principal

:limpiar_credenciales
echo.
echo === LIMPIAR CREDENCIALES EXPIRADAS ===
echo.
set "log_file=%log_dir%\limpiar_%fecha%.log"

echo Limpiando credenciales expiradas...
echo Limpieza iniciada: %date% %time% > %log_file%

certutil -store -user MY | findstr "Expired" >> %log_file%

echo Limpieza completada
pause
goto menu_principal

:gestion_servicios
echo.
echo === GESTIONAR CREDENCIALES DE SERVICIOS ===
echo.
set "log_file=%log_dir%\servicios_%fecha%.log"

echo Gestionando credenciales de servicios...
echo Gestion iniciada: %date% %time% > %log_file%

wmic service get name,startname,state | findstr /v "LocalSystem" >> %log_file%

echo Gestion completada
pause
goto menu_principal

:exportar_credenciales
echo.
echo === EXPORTAR CREDENCIALES ===
echo.
set "export_dir=D:\Export\Credenciales"
set "log_file=%log_dir%\exportar_%fecha%.log"

echo Exportando credenciales...
echo Exportacion iniciada: %date% %time% > %log_file%

if not exist "%export_dir%\%fecha%" mkdir "%export_dir%\%fecha%"
reg export "HKCU\Software\Microsoft\Windows\CurrentVersion\Credentials" "%export_dir%\%fecha%\credenciales.reg" /y >> %log_file%

echo Exportacion completada
pause
goto menu_principal

:verificar_integridad
echo.
echo === VERIFICAR INTEGRIDAD ===
echo.
set "log_file=%log_dir%\verificar_%fecha%.log"

echo Verificando integridad...
echo Verificacion iniciada: %date% %time% > %log_file%

cmdkey /list >> %log_file%
certutil -store -user MY | findstr "Valid" >> %log_file%

echo Verificacion completada
pause
goto menu_principal

:generar_reporte
echo.
echo === GENERAR REPORTE COMPLETO ===
echo.
set "reporte=%log_dir%\reporte_credenciales_%fecha%.txt"

echo REPORTE DE CREDENCIALES > %reporte%
echo ======================================== >> %reporte%
echo Fecha: %date% %time% >> %reporte%
echo Sistema: %COMPUTERNAME% >> %reporte%
echo Usuario: %USERNAME% >> %reporte%
echo. >> %reporte%

echo CREDENCIALES ALMACENADAS: >> %reporte%
cmdkey /list >> %reporte%

echo Reporte generado: %reporte%
pause
goto menu_principal

:salir
echo Gracias por usar la Gestion Completa de Credenciales
exit
```

## 💡 Consejos Importantes

### **Optimización**
- Realiza auditorías regulares de credenciales
- Implementa rotación automática de contraseñas
- Utiliza herramientas especializadas para gestión masiva

### **Seguridad**
- Almacena credenciales en ubicaciones seguras
- Implementa cifrado para credenciales sensibles
- Establece políticas de expiración de credenciales

### **Mejores Prácticas**
- Documenta todas las credenciales del sistema
- Implementa autenticación multifactor cuando sea posible
- Realiza backups regulares de credenciales críticas

## 🌍 Casos de Uso Reales

### **Administración de Sistemas**
- Gestión de credenciales de servicios
- Auditoría de credenciales del sistema
- Migración de credenciales entre servidores

### **Empresarial**
- Gestión de identidades corporativas
- Cumplimiento de políticas de seguridad
- Integración con directorios activos

### **Desarrollo y Testing**
- Gestión de credenciales de desarrollo
- Configuración de entornos de prueba
- Automatización de despliegues

## 🎯 Conclusión y Siguiente Paso

¡Excelente trabajo! Has dominado las técnicas de gestión de credenciales almacenadas en Windows. Desde listado básico hasta auditorías completas y migración segura, ahora tienes las herramientas necesarias para administrar identidades de forma profesional.

En el siguiente capítulo, exploraremos cómo obtener **Información de rendimiento de recursos**, donde aprenderás a monitorear el rendimiento del sistema, analizar el uso de recursos, y optimizar el funcionamiento de Windows para obtener el máximo rendimiento.

¡Prepárate para convertirte en un experto en optimización de sistemas!

---

## 📚 Enlaces Relacionados

- [Capítulo 32: Gestión de usuarios](32.%20Gestión%20de%20usuarios.md)
- [Capítulo 36: Obtener contraseñas guardadas](36.%20Obtener%20contraseñas%20guardadas.md)
- [Capítulo 59: Comprobar la seguridad en el sistema](59.%20Comprobar%20la%20seguridad%20en%20el%20sistema.md)

## 🔗 Fuentes y Referencias

- **Microsoft Documentation**: [CMDKEY](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/cmdkey)
- **Microsoft Documentation**: [Credential Manager](https://docs.microsoft.com/en-us/windows/win32/secauthn/credential-manager)
- **Windows Security**: [Credential Protection](https://docs.microsoft.com/en-us/windows/security/identity-protection/)
- **Certificate Management**: [Certutil](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/certutil)
- **Registry Management**: [Registry Commands](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/reg)

---

**Autor**: [Jerson Martínez](https://jersonmartinez.com)  
**Blog**: [Crashell](https://crashell.com)  
**Fecha**: 2024  
**Versión**: 1.0 