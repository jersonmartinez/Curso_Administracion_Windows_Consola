# 37. Crear red hospedada üåê

> *"¬øAlguna vez te has preguntado c√≥mo convertir tu PC en un punto de acceso WiFi? ¬øO c√≥mo compartir tu conexi√≥n de internet con otros dispositivos? La creaci√≥n de redes hospedadas es una habilidad esencial para administradores de sistemas y t√©cnicos de red."*

## üìö Conceptos Clave

### **Red Hospedada (Hosted Network)**
Una red virtual creada por Windows que permite compartir la conexi√≥n de internet de una tarjeta de red con otros dispositivos, convirtiendo el equipo en un punto de acceso WiFi.

### **Punto de Acceso (Access Point)**
Dispositivo que permite a otros equipos conectarse a una red inal√°mbrica, actuando como intermediario entre los clientes y la red principal.

### **SSID (Service Set Identifier)**
Nombre √∫nico que identifica una red WiFi, visible para los dispositivos que buscan conexiones disponibles.

### **WPA2-PSK (Wi-Fi Protected Access 2 - Pre-Shared Key)**
Protocolo de seguridad que protege la red con una contrase√±a compartida entre todos los dispositivos conectados.

## üõ†Ô∏è Comandos Principales

### **Netsh WLAN**
Comando principal para gestionar redes inal√°mbricas en Windows, incluyendo la creaci√≥n y gesti√≥n de redes hospedadas.

```batch
netsh wlan set hostednetwork mode=allow ssid="MiRed" key="MiContrase√±a"
```

### **Netsh WLAN Start/Stop**
Inicia o detiene una red hospedada previamente configurada.

```batch
netsh wlan start hostednetwork
netsh wlan stop hostednetwork
```

### **Netsh WLAN Show**
Muestra informaci√≥n detallada sobre las redes hospedadas y su estado.

```batch
netsh wlan show hostednetwork
```

### **Netsh Interface Set Interface**
Habilita o deshabilita interfaces de red espec√≠ficas.

```batch
netsh interface set interface "Wi-Fi" enabled
```

## üí° Ejemplos Pr√°cticos

### **Ejemplo 1: Crear una red hospedada b√°sica**
**Prop√≥sito**: Configurar una red WiFi simple para compartir internet con dispositivos m√≥viles.

```batch
@echo off
echo Configurando red hospedada...
netsh wlan set hostednetwork mode=allow ssid="MiCasa" key="12345678"
netsh wlan start hostednetwork
echo Red "MiCasa" creada y activada
pause
```

### **Ejemplo 2: Verificar el estado de la red**
**Prop√≥sito**: Comprobar si la red hospedada est√° funcionando correctamente y ver informaci√≥n detallada.

```batch
@echo off
echo Verificando estado de la red hospedada...
netsh wlan show hostednetwork
echo.
echo Presiona cualquier tecla para continuar...
pause >nul
```

### **Ejemplo 3: Detener la red hospedada**
**Prop√≥sito**: Desactivar la red compartida cuando ya no se necesite.

```batch
@echo off
echo Deteniendo red hospedada...
netsh wlan stop hostednetwork
echo Red hospedada detenida
pause
```

### **Ejemplo 4: Configurar red con nombre personalizado**
**Prop√≥sito**: Crear una red con un nombre espec√≠fico para identificar f√°cilmente el punto de acceso.

```batch
@echo off
set /p nombre="Ingresa el nombre de la red: "
set /p clave="Ingresa la contrase√±a (m√≠nimo 8 caracteres): "
echo Configurando red "%nombre%"...
netsh wlan set hostednetwork mode=allow ssid="%nombre%" key="%clave%"
netsh wlan start hostednetwork
echo Red "%nombre%" creada exitosamente
pause
```

### **Ejemplo 5: Habilitar compartir conexi√≥n**
**Prop√≥sito**: Configurar el compartir de internet desde la conexi√≥n principal hacia la red hospedada.

```batch
@echo off
echo Habilitando compartir de conexi√≥n...
netsh interface set interface "Ethernet" enabled
netsh interface set interface "Wi-Fi" enabled
echo Configurando compartir de conexi√≥n...
netsh interface set interface "Ethernet" sharing=enabled
echo Conexi√≥n compartida habilitada
pause
```

### **Ejemplo 6: Verificar adaptadores compatibles**
**Prop√≥sito**: Identificar qu√© adaptadores de red soportan la creaci√≥n de redes hospedadas.

```batch
@echo off
echo Verificando adaptadores compatibles...
netsh wlan show drivers
echo.
echo Buscando adaptadores que soporten redes hospedadas...
netsh wlan show drivers | findstr "Hosted network supported"
pause
```

### **Ejemplo 7: Configurar red con seguridad avanzada**
**Prop√≥sito**: Crear una red con contrase√±a fuerte y configuraci√≥n de seguridad optimizada.

```batch
@echo off
echo Configurando red con seguridad avanzada...
netsh wlan set hostednetwork mode=allow ssid="RedSegura2024" key="P@ssw0rd2024!"
netsh wlan set hostednetwork maxclient=10
netsh wlan start hostednetwork
echo Red segura configurada con m√°ximo 10 clientes
pause
```

### **Ejemplo 8: Monitorear clientes conectados**
**Prop√≥sito**: Ver en tiempo real qu√© dispositivos est√°n conectados a la red hospedada.

```batch
@echo off
:monitor
cls
echo Monitoreando clientes conectados...
echo ================================
netsh wlan show hostednetwork
echo.
echo Presiona Ctrl+C para salir
timeout /t 5 /nobreak >nul
goto monitor
```

### **Ejemplo 9: Configurar red temporal para eventos**
**Prop√≥sito**: Crear una red de corta duraci√≥n para reuniones o eventos espec√≠ficos.

```batch
@echo off
set /p evento="Nombre del evento: "
set /p duracion="Duraci√≥n en minutos: "
echo Creando red para evento: %evento%
netsh wlan set hostednetwork mode=allow ssid="Evento_%evento%" key="Evento2024"
netsh wlan start hostednetwork
echo Red activada por %duracion% minutos
timeout /t %duracion% /nobreak >nul
netsh wlan stop hostednetwork
echo Red del evento detenida
pause
```

### **Ejemplo 10: Script de gesti√≥n completa**
**Prop√≥sito**: Script interactivo para gestionar completamente las redes hospedadas con m√∫ltiples opciones.

```batch
@echo off
title Gesti√≥n de Redes Hospedadas
color 0A

:menu
cls
echo ========================================
echo    GESTION DE REDES HOSPEDADAS
echo ========================================
echo.
echo 1. Crear nueva red hospedada
echo 2. Iniciar red existente
echo 3. Detener red activa
echo 4. Ver estado de la red
echo 5. Verificar adaptadores
echo 6. Configurar compartir conexi√≥n
echo 7. Monitorear clientes
echo 8. Salir
echo.
set /p opcion="Selecciona una opci√≥n (1-8): "

if "%opcion%"=="1" goto crear
if "%opcion%"=="2" goto iniciar
if "%opcion%"=="3" goto detener
if "%opcion%"=="4" goto estado
if "%opcion%"=="5" goto adaptadores
if "%opcion%"=="6" goto compartir
if "%opcion%"=="7" goto monitorear
if "%opcion%"=="8" goto salir
goto menu

:crear
cls
echo === CREAR NUEVA RED HOSPEDADA ===
set /p ssid="Nombre de la red (SSID): "
set /p key="Contrase√±a (m√≠nimo 8 caracteres): "
echo.
echo Configurando red "%ssid%"...
netsh wlan set hostednetwork mode=allow ssid="%ssid%" key="%key%"
if %errorlevel%==0 (
    echo Red configurada exitosamente
    set /p iniciar="¬øDeseas iniciar la red ahora? (s/n): "
    if /i "%iniciar%"=="s" goto iniciar
) else (
    echo Error al configurar la red
)
pause
goto menu

:iniciar
cls
echo === INICIAR RED HOSPEDADA ===
netsh wlan start hostednetwork
if %errorlevel%==0 (
    echo Red hospedada iniciada correctamente
) else (
    echo Error al iniciar la red
)
pause
goto menu

:detener
cls
echo === DETENER RED HOSPEDADA ===
netsh wlan stop hostednetwork
if %errorlevel%==0 (
    echo Red hospedada detenida correctamente
) else (
    echo Error al detener la red
)
pause
goto menu

:estado
cls
echo === ESTADO DE LA RED HOSPEDADA ===
netsh wlan show hostednetwork
pause
goto menu

:adaptadores
cls
echo === VERIFICAR ADAPTADORES ===
netsh wlan show drivers | findstr "Hosted network supported"
pause
goto menu

:compartir
cls
echo === CONFIGURAR COMPARTIR CONEXI√ìN ===
echo Habilitando compartir de conexi√≥n...
netsh interface set interface "Ethernet" sharing=enabled
echo Compartir configurado
pause
goto menu

:monitorear
cls
echo === MONITOREAR CLIENTES ===
echo Presiona Ctrl+C para salir del monitoreo
timeout /t 3 /nobreak >nul
:loop
cls
netsh wlan show hostednetwork
timeout /t 5 /nobreak >nul
goto loop

:salir
echo Gracias por usar el gestor de redes hospedadas
exit
```

## üîß Script para Gesti√≥n Avanzada de Redes Hospedadas

```batch
@echo off
title Gesti√≥n Avanzada de Redes Hospedadas
color 0B

:: Verificar permisos de administrador
net session >nul 2>&1
if %errorlevel% neq 0 (
    echo ERROR: Este script requiere permisos de administrador
    echo Ejecuta como administrador y vuelve a intentar
    pause
    exit /b 1
)

:: Variables globales
set "CONFIG_FILE=red_hospedada.conf"
set "LOG_FILE=red_hospedada.log"

:: Funci√≥n para logging
:log
echo [%date% %time%] %~1 >> "%LOG_FILE%"
goto :eof

:: Funci√≥n para verificar compatibilidad
:check_compatibility
call :log "Verificando compatibilidad del sistema"
netsh wlan show drivers | findstr "Hosted network supported" >nul
if %errorlevel% neq 0 (
    echo ERROR: Tu adaptador no soporta redes hospedadas
    call :log "Error: Adaptador no compatible"
    pause
    exit /b 1
)
echo ‚úì Sistema compatible con redes hospedadas
call :log "Sistema verificado como compatible"
goto :eof

:: Funci√≥n para crear configuraci√≥n
:create_config
echo === CONFIGURACI√ìN DE RED HOSPEDADA ===
echo.
set /p SSID="Nombre de la red (SSID): "
set /p KEY="Contrase√±a (m√≠nimo 8 caracteres): "
set /p MAX_CLIENTS="M√°ximo n√∫mero de clientes (1-20): "
set /p AUTO_START="¬øIniciar autom√°ticamente? (s/n): "

:: Guardar configuraci√≥n
echo SSID=%SSID% > "%CONFIG_FILE%"
echo KEY=%KEY% >> "%CONFIG_FILE%"
echo MAX_CLIENTS=%MAX_CLIENTS% >> "%CONFIG_FILE%"
echo AUTO_START=%AUTO_START% >> "%CONFIG_FILE%"

call :log "Configuraci√≥n guardada: %SSID%"
echo ‚úì Configuraci√≥n guardada en %CONFIG_FILE%
goto :eof

:: Funci√≥n para aplicar configuraci√≥n
:apply_config
if not exist "%CONFIG_FILE%" (
    echo ERROR: Archivo de configuraci√≥n no encontrado
    goto :eof
)

for /f "tokens=1,2 delims==" %%a in (%CONFIG_FILE%) do set "%%a=%%b"

echo Aplicando configuraci√≥n...
netsh wlan set hostednetwork mode=allow ssid="%SSID%" key="%KEY%"
if %errorlevel%==0 (
    echo ‚úì Red configurada: %SSID%
    call :log "Red configurada exitosamente: %SSID%"
    
    if /i "%AUTO_START%"=="s" (
        netsh wlan start hostednetwork
        if %errorlevel%==0 (
            echo ‚úì Red iniciada autom√°ticamente
            call :log "Red iniciada autom√°ticamente"
        )
    )
) else (
    echo ‚úó Error al configurar la red
    call :log "Error al configurar red"
)
goto :eof

:: Funci√≥n para monitoreo avanzado
:advanced_monitor
echo === MONITOREO AVANZADO ===
echo Presiona 'q' para salir, 'r' para refrescar
:monitor_loop
cls
echo [%date% %time%] - Monitoreo de Red Hospedada
echo ===========================================
netsh wlan show hostednetwork
echo.
echo Estad√≠sticas de red:
netsh wlan show hostednetwork | findstr "Number of clients"
echo.
echo Comandos: q=salir, r=refrescar
choice /c qr /n /t 5 /d r >nul
if errorlevel 2 goto monitor_loop
if errorlevel 1 goto :eof
goto monitor_loop

:: Men√∫ principal
:main_menu
cls
echo ========================================
echo    GESTION AVANZADA DE REDES HOSPEDADAS
echo ========================================
echo.
echo 1. Verificar compatibilidad del sistema
echo 2. Crear nueva configuraci√≥n
echo 3. Aplicar configuraci√≥n existente
echo 4. Iniciar red hospedada
echo 5. Detener red hospedada
echo 6. Estado de la red
echo 7. Monitoreo avanzado
echo 8. Configurar compartir de conexi√≥n
echo 9. Ver logs del sistema
echo 0. Salir
echo.
set /p choice="Selecciona una opci√≥n (0-9): "

if "%choice%"=="1" (
    call :check_compatibility
    pause
    goto main_menu
)
if "%choice%"=="2" (
    call :create_config
    pause
    goto main_menu
)
if "%choice%"=="3" (
    call :apply_config
    pause
    goto main_menu
)
if "%choice%"=="4" (
    netsh wlan start hostednetwork
    if %errorlevel%==0 (
        echo ‚úì Red iniciada
        call :log "Red iniciada manualmente"
    ) else (
        echo ‚úó Error al iniciar
        call :log "Error al iniciar red"
    )
    pause
    goto main_menu
)
if "%choice%"=="5" (
    netsh wlan stop hostednetwork
    if %errorlevel%==0 (
        echo ‚úì Red detenida
        call :log "Red detenida manualmente"
    ) else (
        echo ‚úó Error al detener
        call :log "Error al detener red"
    )
    pause
    goto main_menu
)
if "%choice%"=="6" (
    netsh wlan show hostednetwork
    pause
    goto main_menu
)
if "%choice%"=="7" (
    call :advanced_monitor
    goto main_menu
)
if "%choice%"=="8" (
    echo Configurando compartir de conexi√≥n...
    netsh interface set interface "Ethernet" sharing=enabled
    echo ‚úì Compartir configurado
    call :log "Compartir de conexi√≥n configurado"
    pause
    goto main_menu
)
if "%choice%"=="9" (
    if exist "%LOG_FILE%" (
        type "%LOG_FILE%"
    ) else (
        echo No hay logs disponibles
    )
    pause
    goto main_menu
)
if "%choice%"=="0" (
    echo Gracias por usar el gestor avanzado
    exit /b 0
)
goto main_menu
```

## üîß Script para Creaci√≥n Masiva de Redes

```batch
@echo off
title Creaci√≥n Masiva de Redes Hospedadas
color 0E

:: Verificar permisos de administrador
net session >nul 2>&1
if %errorlevel% neq 0 (
    echo ERROR: Se requieren permisos de administrador
    pause
    exit /b 1
)

echo === CREACI√ìN MASIVA DE REDES HOSPEDADAS ===
echo.
echo Este script permite crear m√∫ltiples redes hospedadas
echo para diferentes prop√≥sitos (eventos, departamentos, etc.)
echo.

:: Leer archivo de configuraci√≥n masiva
set "CONFIG_FILE=redes_masivas.txt"
if not exist "%CONFIG_FILE%" (
    echo Creando archivo de configuraci√≥n de ejemplo...
    (
        echo EVENTO_TECNOLOGIA|TechEvent2024|8
        echo DEPTO_VENTAS|Ventas2024|5
        echo SALA_REUNIONES|Reunion2024|10
        echo AREA_COMUN|Comun2024|15
    ) > "%CONFIG_FILE%"
    echo Archivo de configuraci√≥n creado: %CONFIG_FILE%
    echo Edita el archivo y ejecuta nuevamente el script
    pause
    exit /b 0
)

echo Procesando configuraciones...
echo.

:: Contador de redes creadas
set "creadas=0"
set "errores=0"

:: Procesar cada l√≠nea del archivo
for /f "tokens=1,2,3 delims=|" %%a in (%CONFIG_FILE%) do (
    echo Configurando red: %%a
    echo SSID: %%a
    echo Contrase√±a: %%b
    echo M√°ximo clientes: %%c
    echo.
    
    netsh wlan set hostednetwork mode=allow ssid="%%a" key="%%b"
    if !errorlevel!==0 (
        echo ‚úì Red "%%a" configurada correctamente
        set /a creadas+=1
    ) else (
        echo ‚úó Error al configurar "%%a"
        set /a errores+=1
    )
    echo.
)

echo ========================================
echo RESUMEN DE CREACI√ìN MASIVA
echo ========================================
echo Redes creadas exitosamente: %creadas%
echo Errores encontrados: %errores%
echo Total procesadas: %creadas% + %errores%
echo.

if %creadas% gtr 0 (
    set /p iniciar="¬øDeseas iniciar todas las redes configuradas? (s/n): "
    if /i "%iniciar%"=="s" (
        echo Iniciando redes...
        for /f "tokens=1 delims=|" %%a in (%CONFIG_FILE%) do (
            netsh wlan start hostednetwork
            if !errorlevel!==0 (
                echo ‚úì Red "%%a" iniciada
            ) else (
                echo ‚úó Error al iniciar "%%a"
            )
        )
    )
)

echo.
echo Proceso completado
pause
```

## üí° Consejos Importantes

### **Optimizaci√≥n**
- **Verificar compatibilidad**: Antes de crear una red hospedada, aseg√∫rate de que tu adaptador WiFi soporte esta funci√≥n
- **Contrase√±as seguras**: Usa contrase√±as de al menos 8 caracteres con combinaci√≥n de letras, n√∫meros y s√≠mbolos
- **L√≠mite de clientes**: Configura un l√≠mite razonable de clientes para evitar saturar la red

### **Seguridad**
- **Cambiar contrase√±as regularmente**: Actualiza las contrase√±as de las redes hospedadas peri√≥dicamente
- **Monitorear conexiones**: Revisa regularmente qu√© dispositivos est√°n conectados
- **Desactivar cuando no se use**: Det√©n las redes hospedadas cuando no las necesites

### **Mejores Pr√°cticas**
- **Nombres descriptivos**: Usa nombres de red que indiquen claramente el prop√≥sito
- **Documentar configuraciones**: Mant√©n un registro de las configuraciones de red
- **Pruebas de conectividad**: Verifica que los clientes puedan acceder a internet correctamente

## üåç Casos de Uso Reales

### **Administraci√≥n de Sistemas**
- **Puntos de acceso temporales**: Crear redes para eventos corporativos o reuniones
- **Redes de emergencia**: Proporcionar conectividad cuando falla la infraestructura principal
- **Testing de aplicaciones**: Crear entornos de prueba aislados para desarrollo

### **Entornos Educativos**
- **Laboratorios m√≥viles**: Configurar redes para clases que requieren conectividad
- **Presentaciones**: Compartir internet durante demostraciones o exposiciones
- **Trabajo colaborativo**: Facilitar la conexi√≥n entre dispositivos de estudiantes

### **Empresas**
- **Oficinas temporales**: Configurar conectividad en espacios de trabajo temporales
- **Conferencias**: Proporcionar WiFi para eventos corporativos
- **Backup de conectividad**: Mantener redes de respaldo para casos de emergencia

## üéØ Conclusi√≥n y Siguiente Paso

¬°Excelente! Has dominado la creaci√≥n y gesti√≥n de redes hospedadas en Windows. Esta habilidad te permitir√° convertir cualquier PC en un punto de acceso WiFi, una competencia muy valorada en administraci√≥n de sistemas y soporte t√©cnico.

**¬øQu√© has aprendido?**
- Configurar redes hospedadas con seguridad WPA2
- Gestionar m√∫ltiples redes simult√°neamente
- Monitorear clientes conectados en tiempo real
- Automatizar la creaci√≥n y gesti√≥n de redes

**Aplicaciones profesionales:**
- T√©cnico de soporte en empresas
- Administrador de sistemas
- Consultor de redes
- Instructor de TI

En el siguiente cap√≠tulo, aprender√°s a **enviar mensajes a usuarios** conectados en la red, una habilidad complementaria que te permitir√° comunicarte directamente con los dispositivos conectados a tus redes hospedadas. ¬°Prep√°rate para dominar la comunicaci√≥n en red!

---

## üìö Enlaces Relacionados

- [Cap√≠tulo 35: Conexiones de red](35.%20Conexiones%20de%20red.md)
- [Cap√≠tulo 38: Enviar mensajes a usuarios](38.%20Enviar%20mensajes%20a%20usuarios.md)
- [Cap√≠tulo 39: Env√≠o de se√±ales](39.%20Env√≠o%20de%20se√±ales.md)

## üîó Fuentes y Referencias

- **Microsoft Docs**: [Netsh WLAN Commands](https://docs.microsoft.com/en-us/windows-server/networking/technologies/netsh/netsh-wlan)
- **Windows Networking**: [Hosted Network](https://docs.microsoft.com/en-us/windows/win32/nativewifi/hosted-network)
- **Wi-Fi Alliance**: [WPA2 Security](https://www.wi-fi.org/discover-wi-fi/security)
- **Autor**: [Jerson Mart√≠nez](https://jersonmartinez.com)
- **Blog DevOps**: [Crashell](https://crashell.com) 