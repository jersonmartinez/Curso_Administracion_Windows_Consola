# üåê CURL

> *"CURL es el puente entre tu sistema y el mundo web. Con √©l, puedes transferir datos a cualquier lugar del planeta"* - **Principio fundamental de las transferencias web**

## üìã Introducci√≥n

¬øTe has preguntado alguna vez c√≥mo descargar archivos desde la l√≠nea de comandos? ¬øC√≥mo automatizar transferencias de datos entre sistemas remotos? En este cap√≠tulo, exploraremos las t√©cnicas avanzadas para utilizar CURL en Windows.

CURL es una herramienta poderosa para transferir datos usando diversos protocolos (HTTP, HTTPS, FTP, SFTP). Aprenderemos a utilizar CURL para descargas web, transferencias de archivos, y automatizaci√≥n de tareas de red.

## üéØ Conceptos Clave

### **CURL (Client URL)**
Herramienta de l√≠nea de comandos para transferir datos usando m√∫ltiples protocolos.

### **Protocolo de Transferencia**
M√©todo de comunicaci√≥n para enviar y recibir datos (HTTP, HTTPS, FTP, SFTP).

### **Headers HTTP**
Informaci√≥n adicional enviada con las peticiones web para controlar el comportamiento.

### **Autenticaci√≥n**
Proceso de verificaci√≥n de identidad para acceder a recursos protegidos.

## üõ†Ô∏è Comandos Principales

### **CURL - Descarga B√°sica**
```batch
curl [opciones] [URL]
```
Comando principal para transferir datos usando m√∫ltiples protocolos.

**Opciones principales:**
- `-O`: Descarga y guarda con el nombre original del archivo
- `-o archivo`: Descarga y guarda con nombre espec√≠fico
- `-f`: Falla silenciosamente en errores HTTP
- `-L`: Sigue redirecciones autom√°ticamente

### **CURL - Headers HTTP**
```batch
curl -H "Header: Valor" [URL]
```
Realiza peticiones con headers personalizados.

**Headers comunes:**
- `User-Agent`: Identifica el cliente
- `Accept`: Tipo de contenido aceptado
- `Content-Type`: Tipo de contenido enviado
- `Authorization`: Credenciales de autenticaci√≥n

### **CURL - Autenticaci√≥n**
```batch
curl -u usuario:contrase√±a [URL]
```
Accede a recursos protegidos con autenticaci√≥n b√°sica.

### **CURL - M√©todos HTTP**
```batch
curl -X GET [URL]
curl -X POST -d "datos" [URL]
curl -X PUT -d "datos" [URL]
curl -X DELETE [URL]
```
Especifica el m√©todo HTTP a utilizar.

### **CURL - Transferencia FTP**
```batch
curl -T archivo_local ftp://servidor.com/
curl -O ftp://servidor.com/archivo_remoto
```
Realiza transferencias usando protocolo FTP.

### **CURL - Cookies y Sesiones**
```batch
curl -b "nombre=valor" [URL]
curl -c archivo_cookies [URL]
```
Maneja cookies y sesiones web.

### **CURL - Seguimiento de Redirecciones**
```batch
curl -L [URL]
```
Sigue autom√°ticamente las redirecciones HTTP.

### **CURL - Verificaci√≥n SSL**
```batch
curl -k [URL]
curl --cacert certificado.pem [URL]
```
Controla la verificaci√≥n de certificados SSL.

## üí° Ejemplos Pr√°cticos

### **Ejemplo 1: Descarga b√°sica de archivos**
```batch
curl -O https://www.ejemplo.com/archivo.txt
curl -o mi_archivo.txt https://www.ejemplo.com/archivo.txt
curl -O https://www.ejemplo.com/archivo1.txt -O https://www.ejemplo.com/archivo2.txt
```

### **Ejemplo 2: Peticiones HTTP avanzadas**
```batch
curl -H "User-Agent: MiScript/1.0" -H "Accept: application/json" https://api.ejemplo.com/datos
curl -X POST -H "Content-Type: application/json" -d "{\"nombre\":\"test\"}" https://api.ejemplo.com/crear
curl -b "session=abc123" https://www.ejemplo.com/pagina-protegida
curl -L https://www.ejemplo.com/redireccion
```

### **Ejemplo 3: Transferencias FTP**
```batch
curl -u usuario:contrase√±a -O ftp://servidor.com/archivo.txt
curl -u usuario:contrase√±a -T archivo_local.txt ftp://servidor.com/
curl -u usuario:contrase√±a ftp://servidor.com/
curl -u usuario:contrase√±a --ftp-pasv -T archivo.txt ftp://servidor.com/
```

### **Ejemplo 4: Descargas con verificaci√≥n**
```batch
curl -f -o "archivo.zip" "https://www.ejemplo.com/archivo.zip"
if %errorlevel% equ 0 (
    echo Descarga exitosa
) else (
    echo Error en descarga
)
```

### **Ejemplo 5: Automatizaci√≥n de descargas**
```batch
for %%u in (
    "https://www.ejemplo.com/archivo1.zip"
    "https://www.ejemplo.com/archivo2.txt"
    "https://www.ejemplo.com/archivo3.pdf"
) do (
    echo Descargando: %%u
    curl -O "%%u"
)
```

## üîß Scripts Avanzados

### **Script de Gesti√≥n Completa de CURL**
**Archivo**: `scripts/68-curl/gestion-completa-curl.bat`

Este script proporciona una interfaz completa para la gesti√≥n de transferencias con CURL, incluyendo:
- Descarga simple de archivos
- Descarga con verificaci√≥n de integridad
- Peticiones HTTP personalizadas
- Transferencias FTP
- Descargas m√∫ltiples
- Monitoreo de descargas
- Generaci√≥n de reportes

### **Sistema de Gesti√≥n Avanzada de CURL**
**Archivo**: `scripts/68-curl/sistema-gestion-avanzada-curl.bat`

Sistema avanzado con caracter√≠sticas adicionales:
- Configuraci√≥n mediante archivos de configuraci√≥n
- Descargas programadas autom√°ticas
- Verificaci√≥n de integridad avanzada
- Gesti√≥n de sesiones y cookies
- Monitoreo en tiempo real
- Backup y restauraci√≥n de configuraciones
- Generaci√≥n de reportes detallados
- An√°lisis de rendimiento de transferencias

## üí° Consejos Importantes

### **Optimizaci√≥n**
- Usa la opci√≥n `-f` para manejar errores HTTP
- Implementa reintentos para descargas cr√≠ticas
- Utiliza la opci√≥n `-L` para seguir redirecciones

### **Seguridad**
- Verifica URLs antes de descargar
- Usa HTTPS cuando sea posible
- Valida archivos descargados

### **Mejores Pr√°cticas**
- Documenta las URLs y par√°metros utilizados
- Implementa logs para monitorear descargas
- Realiza pruebas en entornos controlados

## üåç Casos de Uso Reales

### **Administraci√≥n de Sistemas**
- Descarga autom√°tica de actualizaciones
- Backup de archivos remotos
- Monitoreo de servicios web

### **Empresarial**
- Sincronizaci√≥n de datos entre sistemas
- Descarga de reportes autom√°ticos
- Integraci√≥n con APIs empresariales

### **Desarrollo y Testing**
- Descarga de dependencias de desarrollo
- Testing de APIs web
- Automatizaci√≥n de despliegues

## üéØ Conclusi√≥n y Siguiente Paso

¬°Excelente trabajo! Has dominado las t√©cnicas de uso de CURL en Windows. Desde descargas b√°sicas hasta automatizaci√≥n avanzada, ahora tienes las herramientas necesarias para transferir datos de manera eficiente y program√°tica.

En el siguiente cap√≠tulo, exploraremos **SHELL**, donde aprender√°s a gestionar entornos de shell, configurar variables de entorno, y automatizar tareas del sistema operativo.

¬°Prep√°rate para convertirte en un experto en gesti√≥n de shells y automatizaci√≥n del sistema!

---

## üìö Enlaces Relacionados

- [Cap√≠tulo 67: Registros](67.%20Registros.md)
- [Cap√≠tulo 69: SHELL](69.%20SHELL.md)

## üîó Fuentes y Referencias

- **CURL Documentation**: [CURL Manual](https://curl.se/docs/)
- **CURL Windows**: [CURL for Windows](https://curl.se/windows/)
- **HTTP Methods**: [HTTP Methods](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods)

---

**Autor**: [Jerson Mart√≠nez](https://jersonmartinez.com)  
**Blog**: [Crashell](https://crashell.com)  
**Fecha**: 2024  
**Versi√≥n**: 1.0