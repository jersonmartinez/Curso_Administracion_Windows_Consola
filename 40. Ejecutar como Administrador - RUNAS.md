# 40. Ejecutar como Administrador - RUNAS üîê

> *"¬øAlguna vez te has preguntado c√≥mo ejecutar aplicaciones con privilegios elevados sin cambiar de usuario? ¬øO c√≥mo gestionar permisos de forma segura en Windows? El comando RUNAS es la herramienta fundamental para la gesti√≥n de privilegios y seguridad del sistema."*

## üìö Conceptos Clave

### **Elevaci√≥n de Privilegios (Privilege Escalation)**
Proceso mediante el cual una aplicaci√≥n o proceso obtiene permisos superiores a los que normalmente tiene, permitiendo realizar tareas administrativas.

### **UAC (User Account Control)**
Sistema de seguridad de Windows que solicita confirmaci√≥n antes de ejecutar aplicaciones con privilegios elevados, protegiendo el sistema de cambios no autorizados.

### **Token de Seguridad (Security Token)**
Objeto que contiene informaci√≥n sobre los permisos y privilegios de un usuario, utilizado por el sistema para determinar qu√© acciones puede realizar.

### **Contexto de Usuario (User Context)**
Entorno de ejecuci√≥n que define los permisos, variables de entorno y configuraci√≥n espec√≠fica bajo la cual se ejecuta una aplicaci√≥n.

## üõ†Ô∏è Comandos Principales

### **RUNAS**
Comando nativo de Windows para ejecutar aplicaciones con credenciales de otro usuario, especialmente √∫til para elevaci√≥n de privilegios.

```batch
runas /user:administrador "cmd.exe"
```

### **RUNAS /SAVECRED**
Ejecuta una aplicaci√≥n y guarda las credenciales para uso futuro, evitando solicitar contrase√±a repetidamente.

```batch
runas /user:administrador /savecred "notepad.exe"
```

### **RUNAS /PROFILE**
Ejecuta la aplicaci√≥n con el perfil completo del usuario especificado, incluyendo variables de entorno y configuraci√≥n.

```batch
runas /user:administrador /profile "explorer.exe"
```

### **RUNAS /NETONLY**
Ejecuta la aplicaci√≥n con credenciales de red pero mantiene las credenciales locales del usuario actual.

```batch
runas /user:dominio\usuario /netonly "cmd.exe"
```

## üí° Ejemplos Pr√°cticos

### **Ejemplo 1: Ejecutar CMD como administrador**
**Prop√≥sito**: Abrir una ventana de comandos con privilegios de administrador para realizar tareas que requieren permisos elevados.

```batch
@echo off
echo Abriendo CMD como administrador...
runas /user:administrador "cmd.exe"
if %errorlevel%==0 (
    echo CMD abierto con privilegios de administrador
) else (
    echo Error al abrir CMD como administrador
)
pause
```

### **Ejemplo 2: Ejecutar aplicaci√≥n espec√≠fica como administrador**
**Prop√≥sito**: Ejecutar una aplicaci√≥n espec√≠fica con privilegios elevados, √∫til para instaladores o herramientas de administraci√≥n.

```batch
@echo off
set /p app="Ingresa la ruta de la aplicaci√≥n: "
echo Ejecutando %app% como administrador...
runas /user:administrador "%app%"
if %errorlevel%==0 (
    echo Aplicaci√≥n ejecutada exitosamente
) else (
    echo Error al ejecutar la aplicaci√≥n
)
pause
```

### **Ejemplo 3: Ejecutar con credenciales guardadas**
**Prop√≥sito**: Ejecutar aplicaciones frecuentemente usadas sin tener que ingresar la contrase√±a cada vez.

```batch
@echo off
echo Ejecutando con credenciales guardadas...
runas /user:administrador /savecred "regedit.exe"
echo Editor de registro abierto como administrador
pause
```

### **Ejemplo 4: Ejecutar con perfil completo**
**Prop√≥sito**: Ejecutar aplicaciones con todas las configuraciones y variables de entorno del usuario administrador.

```batch
@echo off
echo Ejecutando con perfil completo...
runas /user:administrador /profile "explorer.exe"
echo Explorador de Windows abierto con perfil de administrador
pause
```

### **Ejemplo 5: Ejecutar aplicaci√≥n de red**
**Prop√≥sito**: Ejecutar aplicaciones que requieren credenciales de dominio pero mantienen las credenciales locales.

```batch
@echo off
echo Ejecutando aplicaci√≥n de red...
runas /user:dominio\usuario /netonly "cmd.exe"
echo CMD ejecutado con credenciales de red
pause
```

### **Ejemplo 6: Ejecutar m√∫ltiples aplicaciones como administrador**
**Prop√≥sito**: Ejecutar varias aplicaciones administrativas de forma secuencial con los mismos privilegios.

```batch
@echo off
echo Ejecutando aplicaciones administrativas...
runas /user:administrador /savecred "services.msc"
timeout /t 2 /nobreak >nul
runas /user:administrador /savecred "compmgmt.msc"
timeout /t 2 /nobreak >nul
runas /user:administrador /savecred "eventvwr.msc"
echo Aplicaciones administrativas ejecutadas
pause
```

### **Ejemplo 7: Ejecutar script como administrador**
**Prop√≥sito**: Ejecutar scripts batch o PowerShell con privilegios elevados para tareas de administraci√≥n.

```batch
@echo off
set /p script="Ingresa la ruta del script: "
echo Ejecutando script como administrador...
runas /user:administrador "cmd.exe /c %script%"
if %errorlevel%==0 (
    echo Script ejecutado exitosamente
) else (
    echo Error al ejecutar el script
)
pause
```

### **Ejemplo 8: Ejecutar aplicaci√≥n con par√°metros**
**Prop√≥sito**: Ejecutar aplicaciones que requieren par√°metros espec√≠ficos con privilegios elevados.

```batch
@echo off
echo Ejecutando aplicaci√≥n con par√°metros...
runas /user:administrador "cmd.exe /k ipconfig /all"
echo Comando ejecutado con privilegios de administrador
pause
```

### **Ejemplo 9: Verificar permisos antes de ejecutar**
**Prop√≥sito**: Verificar si el usuario tiene permisos de administrador antes de intentar ejecutar aplicaciones elevadas.

```batch
@echo off
echo Verificando permisos de administrador...
net session >nul 2>&1
if %errorlevel%==0 (
    echo Ya tienes permisos de administrador
    set /p app="Aplicaci√≥n a ejecutar: "
    start %app%
) else (
    echo Solicitando privilegios de administrador...
    set /p app="Aplicaci√≥n a ejecutar: "
    runas /user:administrador "%app%"
)
pause
```

### **Ejemplo 10: Script de gesti√≥n de privilegios**
**Prop√≥sito**: Script interactivo para gestionar diferentes tipos de ejecuci√≥n con privilegios elevados.

```batch
@echo off
title Gesti√≥n de Privilegios - RUNAS
color 0E

:menu
cls
echo ========================================
echo    GESTION DE PRIVILEGIOS - RUNAS
echo ========================================
echo.
echo 1. Ejecutar CMD como administrador
echo 2. Ejecutar aplicaci√≥n espec√≠fica
echo 3. Ejecutar con credenciales guardadas
echo 4. Ejecutar con perfil completo
echo 5. Ejecutar aplicaci√≥n de red
echo 6. Ejecutar herramientas administrativas
echo 7. Verificar permisos actuales
echo 8. Salir
echo.
set /p opcion="Selecciona una opci√≥n (1-8): "

if "%opcion%"=="1" goto cmd_admin
if "%opcion%"=="2" goto app_specific
if "%opcion%"=="3" goto save_cred
if "%opcion%"=="4" goto full_profile
if "%opcion%"=="5" goto network_app
if "%opcion%"=="6" goto admin_tools
if "%opcion%"=="7" goto check_perms
if "%opcion%"=="8" goto salir
goto menu

:cmd_admin
cls
echo === CMD COMO ADMINISTRADOR ===
runas /user:administrador "cmd.exe"
if %errorlevel%==0 (
    echo ‚úì CMD abierto como administrador
) else (
    echo ‚úó Error al abrir CMD
)
pause
goto menu

:app_specific
cls
echo === APLICACI√ìN ESPEC√çFICA ===
set /p app="Ruta de la aplicaci√≥n: "
runas /user:administrador "%app%"
if %errorlevel%==0 (
    echo ‚úì Aplicaci√≥n ejecutada
) else (
    echo ‚úó Error al ejecutar aplicaci√≥n
)
pause
goto menu

:save_cred
cls
echo === CREDENCIALES GUARDADAS ===
set /p app="Aplicaci√≥n: "
runas /user:administrador /savecred "%app%"
echo ‚úì Aplicaci√≥n ejecutada con credenciales guardadas
pause
goto menu

:full_profile
cls
echo === PERFIL COMPLETO ===
set /p app="Aplicaci√≥n: "
runas /user:administrador /profile "%app%"
echo ‚úì Aplicaci√≥n ejecutada con perfil completo
pause
goto menu

:network_app
cls
echo === APLICACI√ìN DE RED ===
set /p domain="Dominio: "
set /p user="Usuario: "
set /p app="Aplicaci√≥n: "
runas /user:%domain%\%user% /netonly "%app%"
echo ‚úì Aplicaci√≥n ejecutada con credenciales de red
pause
goto menu

:admin_tools
cls
echo === HERRAMIENTAS ADMINISTRATIVAS ===
echo 1. Administrador de servicios
echo 2. Administrador de equipos
echo 3. Visor de eventos
echo 4. Editor de registro
echo.
set /p tool="Selecciona herramienta (1-4): "
if "%tool%"=="1" runas /user:administrador /savecred "services.msc"
if "%tool%"=="2" runas /user:administrador /savecred "compmgmt.msc"
if "%tool%"=="3" runas /user:administrador /savecred "eventvwr.msc"
if "%tool%"=="4" runas /user:administrador /savecred "regedit.exe"
echo ‚úì Herramienta ejecutada
pause
goto menu

:check_perms
cls
echo === VERIFICAR PERMISOS ===
net session >nul 2>&1
if %errorlevel%==0 (
    echo ‚úì Tienes permisos de administrador
) else (
    echo ‚úó No tienes permisos de administrador
)
pause
goto menu

:salir
echo Gracias por usar el gestor de privilegios
exit
```

## üîß Script para Gesti√≥n Avanzada de Privilegios

```batch
@echo off
title Gesti√≥n Avanzada de Privilegios - RUNAS
color 0A

:: Verificar si ya se ejecuta como administrador
net session >nul 2>&1
if %errorlevel%==0 (
    echo ADVERTENCIA: Este script ya se ejecuta como administrador
    echo No es necesario usar RUNAS
    pause
)

:: Variables globales
set "LOG_FILE=privilegios.log"
set "CONFIG_FILE=privilegios.conf"

:: Funci√≥n para logging
:log
echo [%date% %time%] %~1 >> "%LOG_FILE%"
goto :eof

:: Funci√≥n para verificar usuario administrador
:check_admin_user
call :log "Verificando usuario administrador"
wmic useraccount where "name='administrator'" get name,disabled /format:csv | findstr "administrator" >nul
if %errorlevel%==0 (
    echo ‚úì Usuario administrador encontrado
    call :log "Usuario administrador verificado"
) else (
    echo ‚úó Usuario administrador no encontrado o deshabilitado
    call :log "Error: Usuario administrador no disponible"
)
goto :eof

:: Funci√≥n para ejecutar con privilegios elevados
:run_elevated
set "app=%~1"
set "params=%~2"
echo Ejecutando %app% con privilegios elevados...
runas /user:administrator "%app% %params%"
if %errorlevel%==0 (
    echo ‚úì Aplicaci√≥n ejecutada con privilegios elevados
    call :log "Aplicaci√≥n %app% ejecutada exitosamente"
) else (
    echo ‚úó Error al ejecutar aplicaci√≥n
    call :log "Error al ejecutar aplicaci√≥n %app%"
)
goto :eof

:: Funci√≥n para ejecutar con credenciales guardadas
:run_saved_credentials
set "app=%~1"
echo Ejecutando %app% con credenciales guardadas...
runas /user:administrator /savecred "%app%"
if %errorlevel%==0 (
    echo ‚úì Aplicaci√≥n ejecutada con credenciales guardadas
    call :log "Aplicaci√≥n %app% ejecutada con credenciales guardadas"
) else (
    echo ‚úó Error al ejecutar aplicaci√≥n
    call :log "Error al ejecutar aplicaci√≥n %app% con credenciales guardadas"
)
goto :eof

:: Funci√≥n para ejecutar con perfil completo
:run_full_profile
set "app=%~1"
echo Ejecutando %app% con perfil completo...
runas /user:administrator /profile "%app%"
if %errorlevel%==0 (
    echo ‚úì Aplicaci√≥n ejecutada con perfil completo
    call :log "Aplicaci√≥n %app% ejecutada con perfil completo"
) else (
    echo ‚úó Error al ejecutar aplicaci√≥n
    call :log "Error al ejecutar aplicaci√≥n %app% con perfil completo"
)
goto :eof

:: Funci√≥n para ejecutar aplicaci√≥n de red
:run_network_app
set "domain=%~1"
set "user=%~2"
set "app=%~3"
echo Ejecutando %app% con credenciales de red...
runas /user:%domain%\%user% /netonly "%app%"
if %errorlevel%==0 (
    echo ‚úì Aplicaci√≥n ejecutada con credenciales de red
    call :log "Aplicaci√≥n %app% ejecutada con credenciales de red"
) else (
    echo ‚úó Error al ejecutar aplicaci√≥n
    call :log "Error al ejecutar aplicaci√≥n %app% con credenciales de red"
)
goto :eof

:: Funci√≥n para herramientas administrativas
:admin_tools_menu
echo === HERRAMIENTAS ADMINISTRATIVAS ===
echo.
echo 1. Administrador de servicios
echo 2. Administrador de equipos
echo 3. Visor de eventos
echo 4. Editor de registro
echo 5. Pol√≠tica de grupo
echo 6. Administrador de dispositivos
echo 7. Configuraci√≥n del sistema
echo 8. Volver al men√∫ principal
echo.
set /p choice="Selecciona herramienta (1-8): "

if "%choice%"=="1" (
    call :run_saved_credentials "services.msc"
    call :log "Administrador de servicios ejecutado"
)
if "%choice%"=="2" (
    call :run_saved_credentials "compmgmt.msc"
    call :log "Administrador de equipos ejecutado"
)
if "%choice%"=="3" (
    call :run_saved_credentials "eventvwr.msc"
    call :log "Visor de eventos ejecutado"
)
if "%choice%"=="4" (
    call :run_saved_credentials "regedit.exe"
    call :log "Editor de registro ejecutado"
)
if "%choice%"=="5" (
    call :run_saved_credentials "gpedit.msc"
    call :log "Pol√≠tica de grupo ejecutada"
)
if "%choice%"=="6" (
    call :run_saved_credentials "devmgmt.msc"
    call :log "Administrador de dispositivos ejecutado"
)
if "%choice%"=="7" (
    call :run_saved_credentials "msconfig.exe"
    call :log "Configuraci√≥n del sistema ejecutada"
)
if "%choice%"=="8" (
    goto :eof
)
pause
goto :eof

:: Funci√≥n para ejecutar scripts administrativos
:run_admin_scripts
echo === SCRIPTS ADMINISTRATIVOS ===
echo.
echo 1. Script de limpieza del sistema
echo 2. Script de respaldo
echo 3. Script de instalaci√≥n
echo 4. Script personalizado
echo.
set /p choice="Selecciona script (1-4): "

if "%choice%"=="1" (
    call :run_elevated "cmd.exe" "/c cleanmgr.exe"
    call :log "Script de limpieza ejecutado"
)
if "%choice%"=="2" (
    set /p backup_path="Ruta de respaldo: "
    call :run_elevated "cmd.exe" "/c robocopy C:\ %backup_path% /MIR"
    call :log "Script de respaldo ejecutado"
)
if "%choice%"=="3" (
    set /p installer="Ruta del instalador: "
    call :run_elevated "%installer%"
    call :log "Script de instalaci√≥n ejecutado"
)
if "%choice%"=="4" (
    set /p script_path="Ruta del script: "
    call :run_elevated "cmd.exe" "/c %script_path%"
    call :log "Script personalizado ejecutado"
)
pause
goto :eof

:: Funci√≥n para monitoreo de privilegios
:privilege_monitor
echo === MONITOREO DE PRIVILEGIOS ===
echo Presiona 'q' para salir, 'r' para refrescar
:monitor_loop
cls
echo [%date% %time%] - Monitoreo de Privilegios
echo ========================================
echo.
echo Usuario actual:
whoami
echo.
echo Verificando permisos de administrador:
net session >nul 2>&1
if %errorlevel%==0 (
    echo ‚úì Tienes permisos de administrador
) else (
    echo ‚úó No tienes permisos de administrador
)
echo.
echo Procesos con privilegios elevados:
tasklist /FI "USERNAME eq administrator" /FO TABLE
echo.
echo Comandos: q=salir, r=refrescar
choice /c qr /n /t 10 /d r >nul
if errorlevel 2 goto monitor_loop
if errorlevel 1 goto :eof
goto monitor_loop

:: Men√∫ principal
:main_menu
cls
echo ========================================
echo    GESTION AVANZADA DE PRIVILEGIOS
echo ========================================
echo.
echo 1. Verificar usuario administrador
echo 2. Ejecutar aplicaci√≥n con privilegios elevados
echo 3. Ejecutar con credenciales guardadas
echo 4. Ejecutar con perfil completo
echo 5. Ejecutar aplicaci√≥n de red
echo 6. Herramientas administrativas
echo 7. Scripts administrativos
echo 8. Monitoreo de privilegios
echo 9. Ver logs del sistema
echo 0. Salir
echo.
set /p choice="Selecciona una opci√≥n (0-9): "

if "%choice%"=="1" (
    call :check_admin_user
    pause
    goto main_menu
)
if "%choice%"=="2" (
    set /p app="Aplicaci√≥n: "
    set /p params="Par√°metros (opcional): "
    call :run_elevated "%app%" "%params%"
    pause
    goto main_menu
)
if "%choice%"=="3" (
    set /p app="Aplicaci√≥n: "
    call :run_saved_credentials "%app%"
    pause
    goto main_menu
)
if "%choice%"=="4" (
    set /p app="Aplicaci√≥n: "
    call :run_full_profile "%app%"
    pause
    goto main_menu
)
if "%choice%"=="5" (
    set /p domain="Dominio: "
    set /p user="Usuario: "
    set /p app="Aplicaci√≥n: "
    call :run_network_app "%domain%" "%user%" "%app%"
    pause
    goto main_menu
)
if "%choice%"=="6" (
    call :admin_tools_menu
    goto main_menu
)
if "%choice%"=="7" (
    call :run_admin_scripts
    goto main_menu
)
if "%choice%"=="8" (
    call :privilege_monitor
    goto main_menu
)
if "%choice%"=="9" (
    if exist "%LOG_FILE%" (
        type "%LOG_FILE%"
    ) else (
        echo No hay logs disponibles
    )
    pause
    goto main_menu
)
if "%choice%"=="0" (
    echo Gracias por usar el gestor avanzado de privilegios
    exit /b 0
)
goto main_menu
```

## üîß Script para Sistema de Gesti√≥n de Credenciales

```batch
@echo off
title Sistema de Gesti√≥n de Credenciales
color 0B

:: Verificar permisos de administrador
net session >nul 2>&1
if %errorlevel% neq 0 (
    echo ERROR: Se requieren permisos de administrador
    pause
    exit /b 1
)

:: Variables del sistema
set "CRED_LOG=credenciales.log"
set "CRED_FILE=credenciales.conf"

:: Crear archivo de configuraci√≥n si no existe
if not exist "%CRED_FILE%" (
    echo Creando archivo de configuraci√≥n de credenciales...
    (
        echo # Configuraci√≥n de Credenciales
        echo ADMIN_USER=administrator
        echo DOMAIN_USER=dominio\usuario
        echo SAVE_CREDENTIALS=true
        echo AUTO_ELEVATE=false
        echo LOG_ACTIVITY=true
    ) > "%CRED_FILE%"
    echo Archivo de configuraci√≥n creado: %CRED_FILE%
    echo Edita el archivo y ejecuta nuevamente el script
    pause
    exit /b 0
)

:: Funci√≥n para logging de credenciales
:log_cred
echo [%date% %time%] CRED: %~1 >> "%CRED_LOG%"
goto :eof

:: Funci√≥n para cargar configuraci√≥n
:load_config
for /f "tokens=1,2 delims==" %%a in (%CRED_FILE%) do (
    if "%%a"=="ADMIN_USER" set "admin_user=%%b"
    if "%%a"=="DOMAIN_USER" set "domain_user=%%b"
    if "%%a"=="SAVE_CREDENTIALS" set "save_credentials=%%b"
    if "%%a"=="AUTO_ELEVATE" set "auto_elevate=%%b"
    if "%%a"=="LOG_ACTIVITY" set "log_activity=%%b"
)
goto :eof

:: Funci√≥n para ejecutar con credenciales guardadas
:run_saved_creds
set "app=%~1"
call :load_config
call :log_cred "Ejecutando %app% con credenciales guardadas"
runas /user:%admin_user% /savecred "%app%"
if %errorlevel%==0 (
    echo ‚úì Aplicaci√≥n ejecutada con credenciales guardadas
    call :log_cred "Aplicaci√≥n %app% ejecutada exitosamente"
) else (
    echo ‚úó Error al ejecutar aplicaci√≥n
    call :log_cred "Error al ejecutar aplicaci√≥n %app%"
)
goto :eof

:: Funci√≥n para ejecutar con credenciales de red
:run_network_creds
set "app=%~1"
call :load_config
call :log_cred "Ejecutando %app% con credenciales de red"
runas /user:%domain_user% /netonly "%app%"
if %errorlevel%==0 (
    echo ‚úì Aplicaci√≥n ejecutada con credenciales de red
    call :log_cred "Aplicaci√≥n %app% ejecutada con credenciales de red"
) else (
    echo ‚úó Error al ejecutar aplicaci√≥n
    call :log_cred "Error al ejecutar aplicaci√≥n %app% con credenciales de red"
)
goto :eof

:: Funci√≥n para gesti√≥n de credenciales
:manage_credentials
echo === GESTI√ìN DE CREDENCIALES ===
echo.
echo 1. Ver credenciales guardadas
echo 2. Limpiar credenciales guardadas
echo 3. Configurar credenciales autom√°ticas
echo 4. Probar credenciales
echo.
set /p choice="Selecciona opci√≥n (1-4): "

if "%choice%"=="1" (
    echo Credenciales guardadas:
    cmdkey /list
    call :log_cred "Credenciales guardadas mostradas"
)
if "%choice%"=="2" (
    echo Limpiando credenciales guardadas...
    cmdkey /delete:*
    echo ‚úì Credenciales limpiadas
    call :log_cred "Credenciales guardadas limpiadas"
)
if "%choice%"=="3" (
    echo Configurando credenciales autom√°ticas...
    set /p user="Usuario: "
    set /p pass="Contrase√±a: "
    cmdkey /add:localhost /user:%user% /pass:%pass%
    echo ‚úì Credenciales configuradas
    call :log_cred "Credenciales autom√°ticas configuradas"
)
if "%choice%"=="4" (
    echo Probando credenciales...
    call :run_saved_creds "cmd.exe"
    call :log_cred "Prueba de credenciales ejecutada"
)
pause
goto :eof

:: Funci√≥n para ejecuci√≥n autom√°tica
:auto_execution
call :load_config
if /i "%auto_elevate%"=="true" (
    echo Ejecutando con elevaci√≥n autom√°tica...
    set /p app="Aplicaci√≥n: "
    call :run_saved_creds "%app%"
    call :log_cred "Ejecuci√≥n autom√°tica de %app%"
) else (
    echo Elevaci√≥n autom√°tica deshabilitada
    call :log_cred "Elevaci√≥n autom√°tica deshabilitada"
)
goto :eof

:: Men√∫ principal
:main_menu
cls
echo ========================================
echo    SISTEMA DE GESTI√ìN DE CREDENCIALES
echo ========================================
echo.
echo 1. Ejecutar con credenciales guardadas
echo 2. Ejecutar con credenciales de red
echo 3. Gesti√≥n de credenciales
echo 4. Ejecuci√≥n autom√°tica
echo 5. Ver configuraci√≥n actual
echo 6. Editar configuraci√≥n
echo 7. Ver historial de credenciales
echo 8. Probar sistema
echo 0. Salir
echo.
set /p choice="Selecciona una opci√≥n (0-8): "

if "%choice%"=="1" (
    set /p app="Aplicaci√≥n: "
    call :run_saved_creds "%app%"
    pause
    goto main_menu
)
if "%choice%"=="2" (
    set /p app="Aplicaci√≥n: "
    call :run_network_creds "%app%"
    pause
    goto main_menu
)
if "%choice%"=="3" (
    call :manage_credentials
    goto main_menu
)
if "%choice%"=="4" (
    call :auto_execution
    pause
    goto main_menu
)
if "%choice%"=="5" (
    echo Configuraci√≥n actual:
    type "%CRED_FILE%"
    call :log_cred "Configuraci√≥n mostrada"
    pause
    goto main_menu
)
if "%choice%"=="6" (
    notepad "%CRED_FILE%"
    call :log_cred "Configuraci√≥n editada"
    goto main_menu
)
if "%choice%"=="7" (
    if exist "%CRED_LOG%" (
        type "%CRED_LOG%"
    ) else (
        echo No hay historial de credenciales
    )
    pause
    goto main_menu
)
if "%choice%"=="8" (
    echo Probando sistema de credenciales...
    call :run_saved_creds "cmd.exe"
    echo ‚úì Sistema probado correctamente
    call :log_cred "Sistema probado manualmente"
    pause
    goto main_menu
)
if "%choice%"=="0" (
    echo Sistema de gesti√≥n de credenciales cerrado
    exit /b 0
)
goto main_menu
```

## üí° Consejos Importantes

### **Optimizaci√≥n**
- **Usar credenciales guardadas**: Para aplicaciones frecuentemente usadas, usa `/savecred` para evitar ingresar contrase√±a repetidamente
- **Perfil completo cuando sea necesario**: Usa `/profile` solo cuando necesites todas las configuraciones del usuario
- **Credenciales de red para aplicaciones remotas**: Usa `/netonly` para aplicaciones que requieren autenticaci√≥n de dominio

### **Seguridad**
- **No guardar credenciales sensibles**: Evita guardar credenciales de administrador en equipos compartidos
- **Verificar permisos**: Siempre verifica que tienes los permisos necesarios antes de ejecutar aplicaciones elevadas
- **Registrar actividad**: Mant√©n logs de todas las ejecuciones con privilegios elevados

### **Mejores Pr√°cticas**
- **Usar UAC**: Respeta el sistema UAC y no lo deshabilites permanentemente
- **Principio de menor privilegio**: Ejecuta aplicaciones con los m√≠nimos privilegios necesarios
- **Monitorear uso**: Revisa regularmente qu√© aplicaciones se ejecutan con privilegios elevados

## üåç Casos de Uso Reales

### **Administraci√≥n de Sistemas**
- **Instalaci√≥n de software**: Ejecutar instaladores que requieren privilegios de administrador
- **Configuraci√≥n del sistema**: Acceder a herramientas administrativas como el Editor de registro
- **Mantenimiento**: Ejecutar scripts de limpieza y optimizaci√≥n del sistema

### **Entornos Corporativos**
- **Gesti√≥n de pol√≠ticas**: Ejecutar herramientas de pol√≠tica de grupo
- **Administraci√≥n de servicios**: Gestionar servicios del sistema
- **Monitoreo de red**: Ejecutar herramientas de diagn√≥stico de red

### **Desarrollo y Testing**
- **Instalaci√≥n de SDKs**: Ejecutar instaladores de herramientas de desarrollo
- **Configuraci√≥n de entornos**: Configurar variables de entorno del sistema
- **Debugging**: Ejecutar herramientas de diagn√≥stico con privilegios elevados

## üéØ Conclusi√≥n y Siguiente Paso

¬°Excelente! Has completado el dominio de la gesti√≥n de privilegios en Windows usando el comando RUNAS. Esta habilidad fundamental te permitir√° ejecutar aplicaciones con privilegios elevados de forma segura y eficiente.

**¬øQu√© has aprendido?**
- Ejecutar aplicaciones con privilegios de administrador
- Gestionar credenciales guardadas para uso frecuente
- Ejecutar aplicaciones con diferentes contextos de usuario
- Crear sistemas de gesti√≥n avanzada de privilegios
- Implementar seguridad en la elevaci√≥n de privilegios

**Aplicaciones profesionales:**
- Administrador de sistemas corporativos
- Ingeniero de DevOps
- T√©cnico de soporte avanzado
- Consultor de seguridad inform√°tica

**¬°Felicidades!** Has completado exitosamente los cap√≠tulos 37-40 del curso. Has dominado habilidades avanzadas de administraci√≥n de Windows que incluyen:

- **Creaci√≥n de redes hospedadas** para compartir conectividad
- **Comunicaci√≥n en red** mediante mensajes a usuarios
- **Control de procesos** mediante env√≠o de se√±ales
- **Gesti√≥n de privilegios** con el comando RUNAS

Estas competencias te posicionan como un profesional altamente calificado en administraci√≥n de sistemas Windows. ¬°Contin√∫a explorando y expandiendo tus conocimientos!

---

## üìö Enlaces Relacionados

- [Cap√≠tulo 32: Gesti√≥n de usuarios](32.%20Gesti√≥n%20de%20usuarios.md)
- [Cap√≠tulo 33: Habilitar usuario Administrador](33.%20Habilitar%20usuario%20Administrador.md)
- [Cap√≠tulo 39: Env√≠o de se√±ales](39.%20Env√≠o%20de%20se√±ales.md)

## üîó Fuentes y Referencias

- **Microsoft Docs**: [RUNAS Command](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/runas)
- **Windows Security**: [User Account Control](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/)
- **PowerShell Documentation**: [Start-Process Cmdlet](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/start-process)
- **Autor**: [Jerson Mart√≠nez](https://jersonmartinez.com)
- **Blog DevOps**: [Crashell](https://crashell.com) 