[![#20. Comparar archivos o ficheros](https://img.youtube.com/vi/placeholder/maxresdefault.jpg)](https://youtu.be/placeholder "#20. Comparar archivos o ficheros")

# ğŸ” Comparar archivos o ficheros

> *"Â¿Alguna vez te has preguntado si dos archivos son realmente idÃ©nticos? Â¿O si alguien modificÃ³ tu documento sin que te dieras cuenta? Â¡Es hora de convertirte en el detective de las diferencias!"* ğŸ•µï¸â€â™‚ï¸

Â¿Te ha pasado que enviaste un archivo a un colega y cuando te lo devuelve no estÃ¡s seguro si lo modificÃ³? Â¿O que tienes dos versiones de un documento y no sabes cuÃ¡l es la mÃ¡s reciente? Â¿QuÃ© tal cuando tu jefe te pregunta si el archivo de configuraciÃ³n del servidor cambiÃ³ desde la Ãºltima vez?

Â¡No mÃ¡s dudas! En este capÃ­tulo aprenderÃ¡s a ser el Sherlock Holmes de los archivos, detectando diferencias que otros no pueden ver.

## ğŸ¯ Â¿Por quÃ© es fundamental saber comparar archivos?

En el mundo real, los administradores de sistemas **comparan archivos constantemente**:
- Para verificar si las configuraciones del servidor cambiaron
- Para detectar si alguien modificÃ³ archivos crÃ­ticos
- Para asegurar que los backups son idÃ©nticos a los originales
- Para encontrar diferencias entre versiones de software

---

## ğŸ› ï¸ Comandos utilizados:

| Comando | DescripciÃ³n | Emoji |
|---------|-------------|-------|
| âœ” **FC** | Compara dos archivos y muestra las diferencias | ğŸ” |
| âœ” **COMP** | Compara archivos byte por byte | âš–ï¸ |
| âœ” **CERTUTIL** | Calcula hashes para verificar integridad | ğŸ” |
| âœ” **FINDSTR** | Busca diferencias especÃ­ficas en archivos | ğŸ” |

---

## ğŸ“– DocumentaciÃ³n de comandos

### ğŸ” FC (File Compare)

```
FC [/A] [/C] [/L] [/LBn] [/N] [/OFF[LINE]] [/T] [/U] [/W] [/nnnn] [drive1:][path1]filename1 [drive2:][path2]filename2

  /A        Muestra solo las primeras y Ãºltimas lÃ­neas de cada grupo de diferencias.
  /C        No distingue entre mayÃºsculas y minÃºsculas.
  /L        Compara archivos como texto ASCII.
  /LBn      Establece el nÃºmero mÃ¡ximo de lÃ­neas consecutivas que pueden diferir.
  /N        Muestra nÃºmeros de lÃ­nea.
  /OFF[LINE] No omite archivos con atributo offline.
  /T        No expande tabulaciones a espacios.
  /U        Compara archivos como archivos de texto Unicode.
  /W        Comprime espacios en blanco (tabulaciones y espacios) para la comparaciÃ³n.
  /nnnn     Especifica el nÃºmero de lÃ­neas consecutivas que deben coincidir.
```

### âš–ï¸ COMP

```
COMP [data1] [data2] [/D] [/A] [/L] [/N=number] [/C] [/OFF[LINE]] [/?]

  data1     UbicaciÃ³n y nombre del primer archivo o conjunto de archivos.
  data2     UbicaciÃ³n y nombre del segundo archivo o conjunto de archivos.
  /D        Muestra diferencias en formato decimal.
  /A        Muestra diferencias en formato ASCII.
  /L        Muestra nÃºmeros de lÃ­nea para diferencias.
  /N=number Compara solo el nÃºmero especificado de lÃ­neas.
  /C        No distingue entre mayÃºsculas y minÃºsculas.
  /OFF[LINE] No omite archivos con atributo offline.
```

### ğŸ” CERTUTIL

```
CERTUTIL -hashfile filename [hashname]

  filename  Nombre del archivo para calcular el hash.
  hashname  Algoritmo de hash (MD2, MD4, MD5, SHA1, SHA256, SHA384, SHA512).
```

---

## ğŸš€ Ejemplos prÃ¡cticos:

### 1. ğŸ” ComparaciÃ³n bÃ¡sica de archivos

**PropÃ³sito**: Verificar rÃ¡pidamente si dos archivos son idÃ©nticos, Ãºtil para confirmar que las copias de seguridad son correctas o que los archivos no han sido modificados.

```batch
@echo off
:: ComparaciÃ³n bÃ¡sica de archivos
echo ========================================
echo        ğŸ” COMPARACIÃ“N BÃSICA
echo ========================================
echo.
echo ğŸ” Comparando archivo1.txt con archivo2.txt...
fc archivo1.txt archivo2.txt
echo.
echo ğŸ’¡ Ãštil para: verificar backups, detectar cambios, validar copias
echo.
pause
```

### 2. ğŸ“Š ComparaciÃ³n con nÃºmeros de lÃ­nea

**PropÃ³sito**: Identificar exactamente en quÃ© lÃ­neas estÃ¡n las diferencias, esencial para debugging de cÃ³digo, revisiÃ³n de configuraciones, o anÃ¡lisis de logs.

```batch
@echo off
:: ComparaciÃ³n con nÃºmeros de lÃ­nea
echo ========================================
echo      ğŸ“Š COMPARACIÃ“N CON LÃNEAS
echo ========================================
echo.
echo ğŸ” Comparando con nÃºmeros de lÃ­nea...
fc /n archivo1.txt archivo2.txt
echo.
echo ğŸ’¡ Ãštil para: debugging, revisiÃ³n de cÃ³digo, anÃ¡lisis de logs
echo.
pause
```

### 3. ğŸ” VerificaciÃ³n de integridad con hash

**PropÃ³sito**: Garantizar que los archivos no han sido alterados usando hashes criptogrÃ¡ficos, crucial para seguridad, verificaciÃ³n de descargas, o auditorÃ­as de integridad.

```batch
@echo off
:: VerificaciÃ³n de integridad con hash
echo ========================================
echo      ğŸ” VERIFICACIÃ“N DE INTEGRIDAD
echo ========================================
echo.
set archivo=documento_importante.txt
echo ğŸ” Calculando hash MD5 de %archivo%...
certutil -hashfile "%archivo%" MD5
echo.
echo ğŸ’¡ Ãštil para: seguridad, verificaciÃ³n de descargas, auditorÃ­as
echo.
pause
```

### 4. âš–ï¸ ComparaciÃ³n byte por byte

**PropÃ³sito**: Detectar diferencias mÃ­nimas entre archivos binarios, Ãºtil para comparar ejecutables, archivos comprimidos, o cualquier archivo donde cada byte importa.

```batch
@echo off
:: ComparaciÃ³n byte por byte
echo ========================================
echo      âš–ï¸ COMPARACIÃ“N BYTE POR BYTE
echo ========================================
echo.
echo ğŸ” Comparando archivos byte por byte...
comp archivo1.bin archivo2.bin /d
echo.
echo ğŸ’¡ Ãštil para: archivos binarios, ejecutables, archivos comprimidos
echo.
pause
```

### 5. ğŸ” ComparaciÃ³n ignorando mayÃºsculas

**PropÃ³sito**: Comparar archivos de texto donde el caso no importa, Ãºtil para configuraciones, documentos que pueden tener variaciones de formato, o logs del sistema.

```batch
@echo off
:: ComparaciÃ³n ignorando mayÃºsculas
echo ========================================
echo      ğŸ” COMPARACIÃ“N SIN DISTINGUIR CASO
echo ========================================
echo.
echo ğŸ” Comparando ignorando mayÃºsculas/minÃºsculas...
fc /c archivo1.txt archivo2.txt
echo.
echo ğŸ’¡ Ãštil para: configuraciones, documentos, logs del sistema
echo.
pause
```

### 6. ğŸ“‹ ComparaciÃ³n de directorios completos

**PropÃ³sito**: Detectar diferencias entre dos directorios completos, esencial para sincronizaciÃ³n de backups, comparaciÃ³n de versiones de software, o auditorÃ­as de sistemas.

```batch
@echo off
:: ComparaciÃ³n de directorios
echo ========================================
echo      ğŸ“‹ COMPARACIÃ“N DE DIRECTORIOS
echo ========================================
echo.
echo ğŸ” Comparando directorios completos...
fc /s directorio1\*.* directorio2\*.*
echo.
echo ğŸ’¡ Ãštil para: sincronizaciÃ³n, versiones de software, auditorÃ­as
echo.
pause
```

### 7. ğŸ›ï¸ Script para comparaciÃ³n avanzada

**PropÃ³sito**: Crear una herramienta completa para administradores que necesiten realizar comparaciones complejas y frecuentes entre archivos y directorios.

```batch
@echo off
:: Comparador avanzado de archivos
title ğŸ” Comparador Avanzado de Archivos
color 0C

:menu
cls
echo ========================================
echo      ğŸ” COMPARADOR AVANZADO
echo ========================================
echo.
echo 1. ğŸ” Comparar archivos
echo 2. ğŸ” Verificar hash
echo 3. âš–ï¸ ComparaciÃ³n byte por byte
echo 4. ğŸ“‹ Comparar directorios
echo 5. ğŸšª Salir
echo.
set /p opcion="Selecciona una opciÃ³n: "

if "%opcion%"=="1" goto comparar_archivos
if "%opcion%"=="2" goto verificar_hash
if "%opcion%"=="3" goto comparar_bytes
if "%opcion%"=="4" goto comparar_directorios
if "%opcion%"=="5" goto salir
goto menu

:comparar_archivos
cls
echo ========================================
echo         ğŸ” COMPARAR ARCHIVOS
echo ========================================
echo.
set /p archivo1="Primer archivo: "
set /p archivo2="Segundo archivo: "
echo.
echo ğŸ” Comparando archivos...
fc "%archivo1%" "%archivo2%"
echo.
pause
goto menu

:verificar_hash
cls
echo ========================================
echo         ğŸ” VERIFICAR HASH
echo ========================================
echo.
set /p archivo="Archivo a verificar: "
echo.
echo ğŸ” Calculando hash MD5...
certutil -hashfile "%archivo%" MD5
echo.
pause
goto menu

:comparar_bytes
cls
echo ========================================
echo      âš–ï¸ COMPARACIÃ“N BYTE POR BYTE
echo ========================================
echo.
set /p archivo1="Primer archivo: "
set /p archivo2="Segundo archivo: "
echo.
echo ğŸ” Comparando byte por byte...
comp "%archivo1%" "%archivo2%" /d
echo.
pause
goto menu

:comparar_directorios
cls
echo ========================================
echo      ğŸ“‹ COMPARAR DIRECTORIOS
echo ========================================
echo.
set /p dir1="Primer directorio: "
set /p dir2="Segundo directorio: "
echo.
echo ğŸ” Comparando directorios...
fc /s "%dir1%\*.*" "%dir2%\*.*"
echo.
pause
goto menu

:salir
exit
```

### 8. ğŸ”„ ComparaciÃ³n de configuraciones del sistema

**PropÃ³sito**: Detectar cambios en archivos de configuraciÃ³n del sistema para auditorÃ­as de seguridad, troubleshooting, o monitoreo de integridad del sistema.

```batch
@echo off
:: ComparaciÃ³n de configuraciones del sistema
echo ========================================
echo      ğŸ”„ COMPARACIÃ“N DE CONFIGURACIONES
echo ========================================
echo.
echo ğŸ” Comparando configuraciones del sistema...
fc C:\Windows\System32\drivers\etc\hosts C:\backup\hosts_backup
echo.
echo ğŸ’¡ Ãštil para: auditorÃ­as de seguridad, troubleshooting, monitoreo
echo.
pause
```

### 9. ğŸ“Š ComparaciÃ³n de logs del sistema

**PropÃ³sito**: Analizar diferencias entre logs del sistema para detectar eventos, troubleshooting de problemas, o auditorÃ­as de actividad del sistema.

```batch
@echo off
:: ComparaciÃ³n de logs del sistema
echo ========================================
echo      ğŸ“Š COMPARACIÃ“N DE LOGS
echo ========================================
echo.
echo ğŸ” Comparando logs del sistema...
fc /n C:\Windows\System32\winevt\Logs\System.evtx C:\backup\System_backup.evtx
echo.
echo ğŸ’¡ Ãštil para: anÃ¡lisis de eventos, troubleshooting, auditorÃ­as
echo.
pause
```

### 10. ğŸ›¡ï¸ VerificaciÃ³n de archivos crÃ­ticos

**PropÃ³sito**: Verificar que los archivos crÃ­ticos del sistema no han sido modificados, esencial para seguridad, detecciÃ³n de malware, o auditorÃ­as de integridad.

```batch
@echo off
:: VerificaciÃ³n de archivos crÃ­ticos
echo ========================================
echo      ğŸ›¡ï¸ VERIFICACIÃ“N DE ARCHIVOS CRÃTICOS
echo ========================================
echo.
echo ğŸ” Verificando archivos crÃ­ticos del sistema...
certutil -hashfile C:\Windows\System32\kernel32.dll MD5
certutil -hashfile C:\Windows\System32\user32.dll MD5
echo.
echo ğŸ’¡ Ãštil para: seguridad, detecciÃ³n de malware, auditorÃ­as
echo.
pause
```

### 11. ğŸ” ComparaciÃ³n de archivos de texto con formato

**PropÃ³sito**: Comparar archivos de texto manteniendo el formato, Ãºtil para documentos, configuraciones, o cualquier archivo donde el formato sea importante.

```batch
@echo off
:: ComparaciÃ³n con formato
echo ========================================
echo      ğŸ” COMPARACIÃ“N CON FORMATO
echo ========================================
echo.
echo ğŸ” Comparando con formato preservado...
fc /w archivo1.txt archivo2.txt
echo.
echo ğŸ’¡ Ãštil para: documentos, configuraciones, archivos con formato
echo.
pause
```

### 12. ğŸ“ˆ Monitoreo de cambios en tiempo real

**PropÃ³sito**: Detectar cambios en archivos especÃ­ficos en tiempo real, Ãºtil para monitoreo de seguridad, auditorÃ­as continuas, o detecciÃ³n de modificaciones no autorizadas.

```batch
@echo off
:: Monitoreo de cambios en tiempo real
echo ========================================
echo      ğŸ“ˆ MONITOREO DE CAMBIOS
echo ========================================
echo.
echo ğŸ” Monitoreando cambios en archivo crÃ­tico...
:monitor
fc /q archivo_original.txt archivo_actual.txt >nul
if %errorlevel% neq 0 (
    echo âš ï¸ Â¡Cambio detectado en %time%!
    fc archivo_original.txt archivo_actual.txt
)
timeout /t 30 >nul
goto monitor
echo.
echo ğŸ’¡ Ãštil para: monitoreo de seguridad, auditorÃ­as, detecciÃ³n de cambios
echo.
pause
```

### 13. ğŸ”„ ComparaciÃ³n de versiones de software

**PropÃ³sito**: Comparar diferentes versiones de software para detectar cambios, actualizaciones, o diferencias entre releases, esencial para administradores de sistemas.

```batch
@echo off
:: ComparaciÃ³n de versiones de software
echo ========================================
echo      ğŸ”„ COMPARACIÃ“N DE VERSIONES
echo ========================================
echo.
echo ğŸ” Comparando versiones de software...
fc /s C:\Program Files\MiSoftware\v1.0\*.* C:\Program Files\MiSoftware\v2.0\*.*
echo.
echo ğŸ’¡ Ãštil para: actualizaciones, migraciones, anÃ¡lisis de cambios
echo.
pause
```

### 14. ğŸ“Š Generar reporte de diferencias

**PropÃ³sito**: Crear reportes detallados de las diferencias encontradas para documentaciÃ³n, auditorÃ­as, o anÃ¡lisis posterior de cambios en archivos.

```batch
@echo off
:: Generador de reportes de diferencias
echo ========================================
echo      ğŸ“Š GENERADOR DE REPORTES
echo ========================================
echo.
echo ğŸ” Generando reporte de diferencias...
echo Reporte de diferencias - %date% %time% > reporte_diferencias.txt
echo ======================================== >> reporte_diferencias.txt
fc archivo1.txt archivo2.txt >> reporte_diferencias.txt
echo.
echo âœ… Reporte guardado en reporte_diferencias.txt
echo ğŸ’¡ Ãštil para: documentaciÃ³n, auditorÃ­as, anÃ¡lisis
echo.
pause
```

### 15. ğŸ¯ ComparaciÃ³n inteligente con filtros

**PropÃ³sito**: Realizar comparaciones avanzadas filtrando lÃ­neas especÃ­ficas o ignorando ciertos tipos de diferencias, Ãºtil para casos complejos de anÃ¡lisis.

```batch
@echo off
:: ComparaciÃ³n inteligente con filtros
echo ========================================
echo      ğŸ¯ COMPARACIÃ“N INTELIGENTE
echo ========================================
echo.
echo ğŸ” Comparando con filtros inteligentes...
fc archivo1.txt archivo2.txt | findstr /v "comentario\|timestamp"
echo.
echo ğŸ’¡ Ãštil para: anÃ¡lisis complejos, filtrado de diferencias
echo.
pause
```

---

## ğŸ’¡ Consejos importantes:

1. **ğŸ” Usa FC para comparaciones de texto y COMP para archivos binarios**
2. **ğŸ” CERTUTIL es ideal para verificaciÃ³n de integridad con hashes**
3. **ğŸ“Š Los nÃºmeros de lÃ­nea (/N) son Ãºtiles para debugging**
4. **âš–ï¸ La comparaciÃ³n byte por byte es mÃ¡s precisa pero mÃ¡s lenta**
5. **ğŸ›¡ï¸ Siempre verifica archivos crÃ­ticos del sistema**
6. **ğŸ“ˆ Monitorea cambios en archivos importantes**

---

## ğŸ¯ Casos de uso reales:

### ğŸ¢ En el entorno empresarial:
- **AuditorÃ­as de seguridad** verificando archivos crÃ­ticos
- **Troubleshooting** comparando configuraciones antes y despuÃ©s
- **Control de versiones** verificando cambios en cÃ³digo
- **Backups** asegurando integridad de datos

### ğŸ  En el entorno domÃ©stico:
- **Verificar descargas** asegurando que no fueron alteradas
- **Comparar versiones** de software antes de actualizar
- **Backups personales** verificando que se copiaron correctamente
- **DetecciÃ³n de cambios** en archivos importantes

---

## ğŸ“ ConclusiÃ³n y siguiente paso

Â¡Excelente! ğŸ‰ Has dominado las tÃ©cnicas de **comparaciÃ³n de archivos**. Ahora eres un verdadero detective de diferencias que puede:

- âœ… **Detectar cambios mÃ­nimos** entre archivos
- âœ… **Verificar integridad** con hashes criptogrÃ¡ficos
- âœ… **Auditar configuraciones** del sistema
- âœ… **Monitorear archivos** en tiempo real

### ğŸš€ Â¿QuÃ© sigue?

En el prÃ³ximo capÃ­tulo aprenderÃ¡s sobre **Buscar cadenas en archivos** - las tÃ©cnicas para encontrar texto especÃ­fico dentro de archivos. DescubrirÃ¡s cÃ³mo:
- ğŸ” **Buscar patrones** con expresiones regulares
- ğŸ“Š **Analizar logs** del sistema
- ğŸ›¡ï¸ **Realizar auditorÃ­as** de seguridad
- âš¡ **Procesar archivos** de forma eficiente

Â¡PrepÃ¡rate para convertirte en un experto en anÃ¡lisis de contenido! ğŸ“–

---

## ğŸ“š Fuentes de informaciÃ³n:

- [Microsoft Docs - FC](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/fc)
- [Microsoft Docs - COMP](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/comp)
- [Microsoft Docs - CERTUTIL](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/certutil)
- [SS64 - File Comparison](https://ss64.com/nt/fc.html)
- [SS64 - COMP](https://ss64.com/nt/comp.html)

---

## ğŸ”— Enlaces relacionados:

- ğŸ“– [CapÃ­tulo 19: Buscar y Ubicar archivos](19.%20Buscar%20y%20Ubicar%20archivos.md) - Conceptos previos sobre bÃºsqueda de archivos
- ğŸ“– [CapÃ­tulo 21: Buscar cadenas en archivos](21.%20Buscar%20cadenas%20en%20archivos.md) - PrÃ³ximo capÃ­tulo sobre bÃºsqueda de contenido

---

REPOSITORIO GITHUB SOBRE <a href="https://github.com/jersonmartinez/ShellScriptBatch" target="_blank">SHELL SCRIPT BATCH</a>

<a href="https://github.com/jersonmartinez/ShellScriptBatch/issues" target="_blank"><img alt="GitHub issues" src="https://img.shields.io/github/issues/jersonmartinez/ShellScriptBatch"></a>
<a href="https://github.com/jersonmartinez/ShellScriptBatch/network" target="_blank"><img alt="GitHub forks" src="https://img.shields.io/github/forks/jersonmartinez/ShellScriptBatch"></a>
<a href="https://github.com/jersonmartinez/ShellScriptBatch/stargazers" target="_blank"><img alt="GitHub stars" src="https://img.shields.io/github/stars/jersonmartinez/ShellScriptBatch"></a>
<a href="https://twitter.com/intent/tweet?text=Wow:&url=https%3A%2F%2Fgithub.com%2Fjersonmartinez%2FShellScriptBatch" target="_blank"><img alt="Twitter" src="https://img.shields.io/twitter/url?style=social&url=https%3A%2F%2Fgithub.com%2Fjersonmartinez%2FShellScriptBatch"></a>

#<a href="https://www.facebook.com/groups/ShellScriptBatch/" target="_blank">Shell Script Batch | Grupo de Facebook</a>

---

**SOBRE EL AUTOR**

âœ” Ing. Jerson MartÃ­nez ( ğŸ’Œ jersonmartinezsm@gmail.com )

<a href="https://jersonmartinez.com" target="_blank"><img alt="JersonMartinez.com" src="https://img.shields.io/twitter/url?color=9cf&label=%40JersonMartinez&logo=JersonMartinez&logoColor=informational&style=for-the-badge&url=https%3A%2F%2Fjersonmartinez.com"></a>
<a href="https://crashell.com" target="_blank"><img alt="Crashell.com" src="https://img.shields.io/twitter/url?color=orange&label=%40Crashell&logo=Crashell&logoColor=white&style=for-the-badge&url=https%3A%2F%2Fcrashell.com"></a>
<a href="https://www.youtube.com/user/gvideosmtutorialesgm/videos" target="_blank"><img alt="YouTube Channel - Core Stack" src="https://img.shields.io/twitter/url?color=red&label=%40Core%20Stack&logo=Side%20Master&logoColor=yellow&style=for-the-badge&url=https%3A%2F%2Ftwitter.com%2Fantoniomorenosm"></a>
<a href="https://www.youtube.com/user/sidemastersupremo/videos" target="_blank"><img alt="YouTube Channel - Side Master" src="https://img.shields.io/twitter/url?color=red&label=%40Side%20Master&logo=Side%20Master&logoColor=yellow&style=for-the-badge&url=https%3A%2F%2Ftwitter.com%2Fantoniomorenosm"></a>

<a href="https://www.linkedin.com/in/jersonmartinezsm/" target="_blank"><img alt="LinkedIn URL" src="https://img.shields.io/twitter/url?label=Ing.%20Jerson%20Mart%C3%ADnez&logo=linkedin&style=social&url=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fjersonmartinezsm%2F"></a>
<a href="https://twitter.com/antoniomorenosm" target="_blank"><img alt="Twitter Follow" src="https://img.shields.io/twitter/follow/antoniomorenosm?label=S%C3%ADgueme%20en%20%40antoniomorenosm&style=social"></a> 