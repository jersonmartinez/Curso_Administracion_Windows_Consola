[![#20. Comparar archivos o ficheros](https://img.youtube.com/vi/placeholder/maxresdefault.jpg)](https://youtu.be/placeholder "#20. Comparar archivos o ficheros")

# 🔍 Comparar archivos o ficheros

> *"¿Alguna vez te has preguntado si dos archivos son realmente idénticos? ¿O si alguien modificó tu documento sin que te dieras cuenta? ¡Es hora de convertirte en el detective de las diferencias!"* 🕵️‍♂️

¿Te ha pasado que enviaste un archivo a un colega y cuando te lo devuelve no estás seguro si lo modificó? ¿O que tienes dos versiones de un documento y no sabes cuál es la más reciente? ¿Qué tal cuando tu jefe te pregunta si el archivo de configuración del servidor cambió desde la última vez?

¡No más dudas! En este capítulo aprenderás a ser el Sherlock Holmes de los archivos, detectando diferencias que otros no pueden ver.

## 🎯 ¿Por qué es fundamental saber comparar archivos?

En el mundo real, los administradores de sistemas **comparan archivos constantemente**:
- Para verificar si las configuraciones del servidor cambiaron
- Para detectar si alguien modificó archivos críticos
- Para asegurar que los backups son idénticos a los originales
- Para encontrar diferencias entre versiones de software

---

## 🛠️ Comandos utilizados:

| Comando | Descripción | Emoji |
|---------|-------------|-------|
| ✔ **FC** | Compara dos archivos y muestra las diferencias | 🔍 |
| ✔ **COMP** | Compara archivos byte por byte | ⚖️ |
| ✔ **CERTUTIL** | Calcula hashes para verificar integridad | 🔐 |
| ✔ **FINDSTR** | Busca diferencias específicas en archivos | 🔎 |

---

## 📖 Documentación de comandos

### 🔍 FC (File Compare)

```
FC [/A] [/C] [/L] [/LBn] [/N] [/OFF[LINE]] [/T] [/U] [/W] [/nnnn] [drive1:][path1]filename1 [drive2:][path2]filename2

  /A        Muestra solo las primeras y últimas líneas de cada grupo de diferencias.
  /C        No distingue entre mayúsculas y minúsculas.
  /L        Compara archivos como texto ASCII.
  /LBn      Establece el número máximo de líneas consecutivas que pueden diferir.
  /N        Muestra números de línea.
  /OFF[LINE] No omite archivos con atributo offline.
  /T        No expande tabulaciones a espacios.
  /U        Compara archivos como archivos de texto Unicode.
  /W        Comprime espacios en blanco (tabulaciones y espacios) para la comparación.
  /nnnn     Especifica el número de líneas consecutivas que deben coincidir.
```

### ⚖️ COMP

```
COMP [data1] [data2] [/D] [/A] [/L] [/N=number] [/C] [/OFF[LINE]] [/?]

  data1     Ubicación y nombre del primer archivo o conjunto de archivos.
  data2     Ubicación y nombre del segundo archivo o conjunto de archivos.
  /D        Muestra diferencias en formato decimal.
  /A        Muestra diferencias en formato ASCII.
  /L        Muestra números de línea para diferencias.
  /N=number Compara solo el número especificado de líneas.
  /C        No distingue entre mayúsculas y minúsculas.
  /OFF[LINE] No omite archivos con atributo offline.
```

### 🔐 CERTUTIL

```
CERTUTIL -hashfile filename [hashname]

  filename  Nombre del archivo para calcular el hash.
  hashname  Algoritmo de hash (MD2, MD4, MD5, SHA1, SHA256, SHA384, SHA512).
```

---

## 🚀 Ejemplos prácticos:

### 1. 🔍 Comparación básica de archivos

**Propósito**: Verificar rápidamente si dos archivos son idénticos, útil para confirmar que las copias de seguridad son correctas o que los archivos no han sido modificados.

```batch
@echo off
:: Comparación básica de archivos
echo ========================================
echo        🔍 COMPARACIÓN BÁSICA
echo ========================================
echo.
echo 🔍 Comparando archivo1.txt con archivo2.txt...
fc archivo1.txt archivo2.txt
echo.
echo 💡 Útil para: verificar backups, detectar cambios, validar copias
echo.
pause
```

### 2. 📊 Comparación con números de línea

**Propósito**: Identificar exactamente en qué líneas están las diferencias, esencial para debugging de código, revisión de configuraciones, o análisis de logs.

```batch
@echo off
:: Comparación con números de línea
echo ========================================
echo      📊 COMPARACIÓN CON LÍNEAS
echo ========================================
echo.
echo 🔍 Comparando con números de línea...
fc /n archivo1.txt archivo2.txt
echo.
echo 💡 Útil para: debugging, revisión de código, análisis de logs
echo.
pause
```

### 3. 🔐 Verificación de integridad con hash

**Propósito**: Garantizar que los archivos no han sido alterados usando hashes criptográficos, crucial para seguridad, verificación de descargas, o auditorías de integridad.

```batch
@echo off
:: Verificación de integridad con hash
echo ========================================
echo      🔐 VERIFICACIÓN DE INTEGRIDAD
echo ========================================
echo.
set archivo=documento_importante.txt
echo 🔍 Calculando hash MD5 de %archivo%...
certutil -hashfile "%archivo%" MD5
echo.
echo 💡 Útil para: seguridad, verificación de descargas, auditorías
echo.
pause
```

### 4. ⚖️ Comparación byte por byte

**Propósito**: Detectar diferencias mínimas entre archivos binarios, útil para comparar ejecutables, archivos comprimidos, o cualquier archivo donde cada byte importa.

```batch
@echo off
:: Comparación byte por byte
echo ========================================
echo      ⚖️ COMPARACIÓN BYTE POR BYTE
echo ========================================
echo.
echo 🔍 Comparando archivos byte por byte...
comp archivo1.bin archivo2.bin /d
echo.
echo 💡 Útil para: archivos binarios, ejecutables, archivos comprimidos
echo.
pause
```

### 5. 🔍 Comparación ignorando mayúsculas

**Propósito**: Comparar archivos de texto donde el caso no importa, útil para configuraciones, documentos que pueden tener variaciones de formato, o logs del sistema.

```batch
@echo off
:: Comparación ignorando mayúsculas
echo ========================================
echo      🔍 COMPARACIÓN SIN DISTINGUIR CASO
echo ========================================
echo.
echo 🔍 Comparando ignorando mayúsculas/minúsculas...
fc /c archivo1.txt archivo2.txt
echo.
echo 💡 Útil para: configuraciones, documentos, logs del sistema
echo.
pause
```

### 6. 📋 Comparación de directorios completos

**Propósito**: Detectar diferencias entre dos directorios completos, esencial para sincronización de backups, comparación de versiones de software, o auditorías de sistemas.

```batch
@echo off
:: Comparación de directorios
echo ========================================
echo      📋 COMPARACIÓN DE DIRECTORIOS
echo ========================================
echo.
echo 🔍 Comparando directorios completos...
fc /s directorio1\*.* directorio2\*.*
echo.
echo 💡 Útil para: sincronización, versiones de software, auditorías
echo.
pause
```

### 7. 🎛️ Script para comparación avanzada

**Propósito**: Crear una herramienta completa para administradores que necesiten realizar comparaciones complejas y frecuentes entre archivos y directorios.

```batch
@echo off
:: Comparador avanzado de archivos
title 🔍 Comparador Avanzado de Archivos
color 0C

:menu
cls
echo ========================================
echo      🔍 COMPARADOR AVANZADO
echo ========================================
echo.
echo 1. 🔍 Comparar archivos
echo 2. 🔐 Verificar hash
echo 3. ⚖️ Comparación byte por byte
echo 4. 📋 Comparar directorios
echo 5. 🚪 Salir
echo.
set /p opcion="Selecciona una opción: "

if "%opcion%"=="1" goto comparar_archivos
if "%opcion%"=="2" goto verificar_hash
if "%opcion%"=="3" goto comparar_bytes
if "%opcion%"=="4" goto comparar_directorios
if "%opcion%"=="5" goto salir
goto menu

:comparar_archivos
cls
echo ========================================
echo         🔍 COMPARAR ARCHIVOS
echo ========================================
echo.
set /p archivo1="Primer archivo: "
set /p archivo2="Segundo archivo: "
echo.
echo 🔍 Comparando archivos...
fc "%archivo1%" "%archivo2%"
echo.
pause
goto menu

:verificar_hash
cls
echo ========================================
echo         🔐 VERIFICAR HASH
echo ========================================
echo.
set /p archivo="Archivo a verificar: "
echo.
echo 🔍 Calculando hash MD5...
certutil -hashfile "%archivo%" MD5
echo.
pause
goto menu

:comparar_bytes
cls
echo ========================================
echo      ⚖️ COMPARACIÓN BYTE POR BYTE
echo ========================================
echo.
set /p archivo1="Primer archivo: "
set /p archivo2="Segundo archivo: "
echo.
echo 🔍 Comparando byte por byte...
comp "%archivo1%" "%archivo2%" /d
echo.
pause
goto menu

:comparar_directorios
cls
echo ========================================
echo      📋 COMPARAR DIRECTORIOS
echo ========================================
echo.
set /p dir1="Primer directorio: "
set /p dir2="Segundo directorio: "
echo.
echo 🔍 Comparando directorios...
fc /s "%dir1%\*.*" "%dir2%\*.*"
echo.
pause
goto menu

:salir
exit
```

### 8. 🔄 Comparación de configuraciones del sistema

**Propósito**: Detectar cambios en archivos de configuración del sistema para auditorías de seguridad, troubleshooting, o monitoreo de integridad del sistema.

```batch
@echo off
:: Comparación de configuraciones del sistema
echo ========================================
echo      🔄 COMPARACIÓN DE CONFIGURACIONES
echo ========================================
echo.
echo 🔍 Comparando configuraciones del sistema...
fc C:\Windows\System32\drivers\etc\hosts C:\backup\hosts_backup
echo.
echo 💡 Útil para: auditorías de seguridad, troubleshooting, monitoreo
echo.
pause
```

### 9. 📊 Comparación de logs del sistema

**Propósito**: Analizar diferencias entre logs del sistema para detectar eventos, troubleshooting de problemas, o auditorías de actividad del sistema.

```batch
@echo off
:: Comparación de logs del sistema
echo ========================================
echo      📊 COMPARACIÓN DE LOGS
echo ========================================
echo.
echo 🔍 Comparando logs del sistema...
fc /n C:\Windows\System32\winevt\Logs\System.evtx C:\backup\System_backup.evtx
echo.
echo 💡 Útil para: análisis de eventos, troubleshooting, auditorías
echo.
pause
```

### 10. 🛡️ Verificación de archivos críticos

**Propósito**: Verificar que los archivos críticos del sistema no han sido modificados, esencial para seguridad, detección de malware, o auditorías de integridad.

```batch
@echo off
:: Verificación de archivos críticos
echo ========================================
echo      🛡️ VERIFICACIÓN DE ARCHIVOS CRÍTICOS
echo ========================================
echo.
echo 🔍 Verificando archivos críticos del sistema...
certutil -hashfile C:\Windows\System32\kernel32.dll MD5
certutil -hashfile C:\Windows\System32\user32.dll MD5
echo.
echo 💡 Útil para: seguridad, detección de malware, auditorías
echo.
pause
```

### 11. 🔍 Comparación de archivos de texto con formato

**Propósito**: Comparar archivos de texto manteniendo el formato, útil para documentos, configuraciones, o cualquier archivo donde el formato sea importante.

```batch
@echo off
:: Comparación con formato
echo ========================================
echo      🔍 COMPARACIÓN CON FORMATO
echo ========================================
echo.
echo 🔍 Comparando con formato preservado...
fc /w archivo1.txt archivo2.txt
echo.
echo 💡 Útil para: documentos, configuraciones, archivos con formato
echo.
pause
```

### 12. 📈 Monitoreo de cambios en tiempo real

**Propósito**: Detectar cambios en archivos específicos en tiempo real, útil para monitoreo de seguridad, auditorías continuas, o detección de modificaciones no autorizadas.

```batch
@echo off
:: Monitoreo de cambios en tiempo real
echo ========================================
echo      📈 MONITOREO DE CAMBIOS
echo ========================================
echo.
echo 🔍 Monitoreando cambios en archivo crítico...
:monitor
fc /q archivo_original.txt archivo_actual.txt >nul
if %errorlevel% neq 0 (
    echo ⚠️ ¡Cambio detectado en %time%!
    fc archivo_original.txt archivo_actual.txt
)
timeout /t 30 >nul
goto monitor
echo.
echo 💡 Útil para: monitoreo de seguridad, auditorías, detección de cambios
echo.
pause
```

### 13. 🔄 Comparación de versiones de software

**Propósito**: Comparar diferentes versiones de software para detectar cambios, actualizaciones, o diferencias entre releases, esencial para administradores de sistemas.

```batch
@echo off
:: Comparación de versiones de software
echo ========================================
echo      🔄 COMPARACIÓN DE VERSIONES
echo ========================================
echo.
echo 🔍 Comparando versiones de software...
fc /s C:\Program Files\MiSoftware\v1.0\*.* C:\Program Files\MiSoftware\v2.0\*.*
echo.
echo 💡 Útil para: actualizaciones, migraciones, análisis de cambios
echo.
pause
```

### 14. 📊 Generar reporte de diferencias

**Propósito**: Crear reportes detallados de las diferencias encontradas para documentación, auditorías, o análisis posterior de cambios en archivos.

```batch
@echo off
:: Generador de reportes de diferencias
echo ========================================
echo      📊 GENERADOR DE REPORTES
echo ========================================
echo.
echo 🔍 Generando reporte de diferencias...
echo Reporte de diferencias - %date% %time% > reporte_diferencias.txt
echo ======================================== >> reporte_diferencias.txt
fc archivo1.txt archivo2.txt >> reporte_diferencias.txt
echo.
echo ✅ Reporte guardado en reporte_diferencias.txt
echo 💡 Útil para: documentación, auditorías, análisis
echo.
pause
```

### 15. 🎯 Comparación inteligente con filtros

**Propósito**: Realizar comparaciones avanzadas filtrando líneas específicas o ignorando ciertos tipos de diferencias, útil para casos complejos de análisis.

```batch
@echo off
:: Comparación inteligente con filtros
echo ========================================
echo      🎯 COMPARACIÓN INTELIGENTE
echo ========================================
echo.
echo 🔍 Comparando con filtros inteligentes...
fc archivo1.txt archivo2.txt | findstr /v "comentario\|timestamp"
echo.
echo 💡 Útil para: análisis complejos, filtrado de diferencias
echo.
pause
```

---

## 💡 Consejos importantes:

1. **🔍 Usa FC para comparaciones de texto y COMP para archivos binarios**
2. **🔐 CERTUTIL es ideal para verificación de integridad con hashes**
3. **📊 Los números de línea (/N) son útiles para debugging**
4. **⚖️ La comparación byte por byte es más precisa pero más lenta**
5. **🛡️ Siempre verifica archivos críticos del sistema**
6. **📈 Monitorea cambios en archivos importantes**

---

## 🎯 Casos de uso reales:

### 🏢 En el entorno empresarial:
- **Auditorías de seguridad** verificando archivos críticos
- **Troubleshooting** comparando configuraciones antes y después
- **Control de versiones** verificando cambios en código
- **Backups** asegurando integridad de datos

### 🏠 En el entorno doméstico:
- **Verificar descargas** asegurando que no fueron alteradas
- **Comparar versiones** de software antes de actualizar
- **Backups personales** verificando que se copiaron correctamente
- **Detección de cambios** en archivos importantes

---

## 🎓 Conclusión y siguiente paso

¡Excelente! 🎉 Has dominado las técnicas de **comparación de archivos**. Ahora eres un verdadero detective de diferencias que puede:

- ✅ **Detectar cambios mínimos** entre archivos
- ✅ **Verificar integridad** con hashes criptográficos
- ✅ **Auditar configuraciones** del sistema
- ✅ **Monitorear archivos** en tiempo real

### 🚀 ¿Qué sigue?

En el próximo capítulo aprenderás sobre **Buscar cadenas en archivos** - las técnicas para encontrar texto específico dentro de archivos. Descubrirás cómo:
- 🔍 **Buscar patrones** con expresiones regulares
- 📊 **Analizar logs** del sistema
- 🛡️ **Realizar auditorías** de seguridad
- ⚡ **Procesar archivos** de forma eficiente

¡Prepárate para convertirte en un experto en análisis de contenido! 📖

---

## 📚 Fuentes de información:

- [Microsoft Docs - FC](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/fc)
- [Microsoft Docs - COMP](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/comp)
- [Microsoft Docs - CERTUTIL](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/certutil)
- [SS64 - File Comparison](https://ss64.com/nt/fc.html)
- [SS64 - COMP](https://ss64.com/nt/comp.html)

---

## 🔗 Enlaces relacionados:

- 📖 [Capítulo 19: Buscar y Ubicar archivos](19.%20Buscar%20y%20Ubicar%20archivos.md) - Conceptos previos sobre búsqueda de archivos
- 📖 [Capítulo 21: Buscar cadenas en archivos](21.%20Buscar%20cadenas%20en%20archivos.md) - Próximo capítulo sobre búsqueda de contenido

---

REPOSITORIO GITHUB SOBRE <a href="https://github.com/jersonmartinez/ShellScriptBatch" target="_blank">SHELL SCRIPT BATCH</a>

<a href="https://github.com/jersonmartinez/ShellScriptBatch/issues" target="_blank"><img alt="GitHub issues" src="https://img.shields.io/github/issues/jersonmartinez/ShellScriptBatch"></a>
<a href="https://github.com/jersonmartinez/ShellScriptBatch/network" target="_blank"><img alt="GitHub forks" src="https://img.shields.io/github/forks/jersonmartinez/ShellScriptBatch"></a>
<a href="https://github.com/jersonmartinez/ShellScriptBatch/stargazers" target="_blank"><img alt="GitHub stars" src="https://img.shields.io/github/stars/jersonmartinez/ShellScriptBatch"></a>
<a href="https://twitter.com/intent/tweet?text=Wow:&url=https%3A%2F%2Fgithub.com%2Fjersonmartinez%2FShellScriptBatch" target="_blank"><img alt="Twitter" src="https://img.shields.io/twitter/url?style=social&url=https%3A%2F%2Fgithub.com%2Fjersonmartinez%2FShellScriptBatch"></a>

#<a href="https://www.facebook.com/groups/ShellScriptBatch/" target="_blank">Shell Script Batch | Grupo de Facebook</a>

---

**SOBRE EL AUTOR**

✔ Ing. Jerson Martínez ( 💌 jersonmartinezsm@gmail.com )

<a href="https://jersonmartinez.com" target="_blank"><img alt="JersonMartinez.com" src="https://img.shields.io/twitter/url?color=9cf&label=%40JersonMartinez&logo=JersonMartinez&logoColor=informational&style=for-the-badge&url=https%3A%2F%2Fjersonmartinez.com"></a>
<a href="https://crashell.com" target="_blank"><img alt="Crashell.com" src="https://img.shields.io/twitter/url?color=orange&label=%40Crashell&logo=Crashell&logoColor=white&style=for-the-badge&url=https%3A%2F%2Fcrashell.com"></a>
<a href="https://www.youtube.com/user/gvideosmtutorialesgm/videos" target="_blank"><img alt="YouTube Channel - Core Stack" src="https://img.shields.io/twitter/url?color=red&label=%40Core%20Stack&logo=Side%20Master&logoColor=yellow&style=for-the-badge&url=https%3A%2F%2Ftwitter.com%2Fantoniomorenosm"></a>
<a href="https://www.youtube.com/user/sidemastersupremo/videos" target="_blank"><img alt="YouTube Channel - Side Master" src="https://img.shields.io/twitter/url?color=red&label=%40Side%20Master&logo=Side%20Master&logoColor=yellow&style=for-the-badge&url=https%3A%2F%2Ftwitter.com%2Fantoniomorenosm"></a>

<a href="https://www.linkedin.com/in/jersonmartinezsm/" target="_blank"><img alt="LinkedIn URL" src="https://img.shields.io/twitter/url?label=Ing.%20Jerson%20Mart%C3%ADnez&logo=linkedin&style=social&url=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fjersonmartinezsm%2F"></a>
<a href="https://twitter.com/antoniomorenosm" target="_blank"><img alt="Twitter Follow" src="https://img.shields.io/twitter/follow/antoniomorenosm?label=S%C3%ADgueme%20en%20%40antoniomorenosm&style=social"></a> 