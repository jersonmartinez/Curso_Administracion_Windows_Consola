# 37. Crear red hospedada 游깷

> *"쮸lguna vez te has preguntado c칩mo convertir tu PC en un punto de acceso WiFi? 쯆 c칩mo compartir tu conexi칩n de internet con otros dispositivos? La creaci칩n de redes hospedadas es una habilidad esencial para administradores de sistemas y t칠cnicos de red."*

## 游닄 Conceptos Clave

### **Red Hospedada (Hosted Network)**
Una red virtual creada por Windows que permite compartir la conexi칩n de internet de una tarjeta de red con otros dispositivos, convirtiendo el equipo en un punto de acceso WiFi.

### **Punto de Acceso (Access Point)**
Dispositivo que permite a otros equipos conectarse a una red inal치mbrica, actuando como intermediario entre los clientes y la red principal.

### **SSID (Service Set Identifier)**
Nombre 칰nico que identifica una red WiFi, visible para los dispositivos que buscan conexiones disponibles.

### **WPA2-PSK (Wi-Fi Protected Access 2 - Pre-Shared Key)**
Protocolo de seguridad que protege la red con una contrase침a compartida entre todos los dispositivos conectados.

## Comandos y herramientas principales

### `NETSH WLAN`
Comando principal para gestionar redes inal치mbricas en Windows, incluyendo la creaci칩n y gesti칩n de redes hospedadas.

**Sintaxis b치sica:**
```batch
netsh wlan [subcomando] [opciones]
```

**Subcomandos principales:**
- `set hostednetwork mode=allow|disallow` - Habilitar o deshabilitar redes hospedadas
- `set hostednetwork ssid="nombre"` - Establecer nombre de la red WiFi
- `set hostednetwork key="contrase침a"` - Establecer contrase침a de la red
- `set hostednetwork maxclient=N` - Establecer m치ximo n칰mero de clientes
- `start hostednetwork` - Iniciar red hospedada configurada
- `stop hostednetwork` - Detener red hospedada activa
- `show hostednetwork` - Mostrar estado y configuraci칩n de la red
- `show drivers` - Mostrar informaci칩n de drivers de red inal치mbrica

### `NETSH WLAN START/STOP`
Comandos para iniciar o detener una red hospedada previamente configurada.

**Sintaxis:**
```batch
netsh wlan start hostednetwork
netsh wlan stop hostednetwork
```

**Par치metros:**
- `start` - Inicia la red hospedada si est치 configurada
- `stop` - Detiene la red hospedada activa

### `NETSH WLAN SHOW`
Comando para mostrar informaci칩n detallada sobre las redes hospedadas y su estado.

**Sintaxis:**
```batch
netsh wlan show hostednetwork
netsh wlan show drivers
netsh wlan show interfaces
```

**Informaci칩n mostrada:**
- Estado de la red hospedada (iniciada/detenida)
- N칰mero de clientes conectados
- Configuraci칩n de seguridad
- Compatibilidad del adaptador

### `NETSH INTERFACE SET INTERFACE`
Comando para habilitar o deshabilitar interfaces de red espec칤ficas.

**Sintaxis:**
```batch
netsh interface set interface "nombre_interfaz" enabled|disabled
netsh interface set interface "nombre_interfaz" sharing=enabled|disabled
```

**Par치metros:**
- `nombre_interfaz` - Nombre de la interfaz de red (Wi-Fi, Ethernet, etc.)
- `enabled|disabled` - Habilitar o deshabilitar la interfaz
- `sharing=enabled|disabled` - Configurar compartir de conexi칩n

### Comandos adicionales utilizados
- `NET SESSION` - Verificar permisos de administrador
- `IF` - Condiciones en scripts para verificar resultados
- `PAUSE` - Pausar ejecuci칩n del script
- `ECHO` - Mostrar mensajes informativos
- `SET` - Definir variables de entorno
- `FOR /F` - Procesar archivos l칤nea por l칤nea
- `TIMEOUT` - Esperar un tiempo espec칤fico
- `CHOICE` - Men칰s interactivos en scripts

## 游눠 Ejemplos Pr치cticos

### **Ejemplo 1: Crear una red hospedada b치sica**
**Prop칩sito**: Configurar una red WiFi simple para compartir internet con dispositivos m칩viles.

```batch
@echo off
echo Configurando red hospedada...
netsh wlan set hostednetwork mode=allow ssid="MiCasa" key="12345678"
netsh wlan start hostednetwork
echo Red "MiCasa" creada y activada
pause
```

### **Ejemplo 2: Verificar el estado de la red**
**Prop칩sito**: Comprobar si la red hospedada est치 funcionando correctamente y ver informaci칩n detallada.

```batch
@echo off
echo Verificando estado de la red hospedada...
netsh wlan show hostednetwork
echo.
echo Presiona cualquier tecla para continuar...
pause >nul
```

### **Ejemplo 3: Detener la red hospedada**
**Prop칩sito**: Desactivar la red compartida cuando ya no se necesite.

```batch
@echo off
echo Deteniendo red hospedada...
netsh wlan stop hostednetwork
echo Red hospedada detenida
pause
```

### **Ejemplo 4: Configurar red con nombre personalizado**
**Prop칩sito**: Crear una red con un nombre espec칤fico para identificar f치cilmente el punto de acceso.

```batch
@echo off
set /p nombre="Ingresa el nombre de la red: "
set /p clave="Ingresa la contrase침a (m칤nimo 8 caracteres): "
echo Configurando red "%nombre%"...
netsh wlan set hostednetwork mode=allow ssid="%nombre%" key="%clave%"
netsh wlan start hostednetwork
echo Red "%nombre%" creada exitosamente
pause
```

### **Ejemplo 5: Habilitar compartir conexi칩n**
**Prop칩sito**: Configurar el compartir de internet desde la conexi칩n principal hacia la red hospedada.

```batch
@echo off
echo Habilitando compartir de conexi칩n...
netsh interface set interface "Ethernet" enabled
netsh interface set interface "Wi-Fi" enabled
echo Configurando compartir de conexi칩n...
netsh interface set interface "Ethernet" sharing=enabled
echo Conexi칩n compartida habilitada
pause
```

### **Ejemplo 6: Verificar adaptadores compatibles**
**Prop칩sito**: Identificar qu칠 adaptadores de red soportan la creaci칩n de redes hospedadas.

```batch
@echo off
echo Verificando adaptadores compatibles...
netsh wlan show drivers
echo.
echo Buscando adaptadores que soporten redes hospedadas...
netsh wlan show drivers | findstr "Hosted network supported"
pause
```

### **Ejemplo 7: Configurar red con seguridad avanzada**
**Prop칩sito**: Crear una red con contrase침a fuerte y configuraci칩n de seguridad optimizada.

```batch
@echo off
echo Configurando red con seguridad avanzada...
netsh wlan set hostednetwork mode=allow ssid="RedSegura2024" key="P@ssw0rd2024!"
netsh wlan set hostednetwork maxclient=10
netsh wlan start hostednetwork
echo Red segura configurada con m치ximo 10 clientes
pause
```

### **Ejemplo 8: Monitorear clientes conectados**
**Prop칩sito**: Ver en tiempo real qu칠 dispositivos est치n conectados a la red hospedada.

```batch
@echo off
:monitor
cls
echo Monitoreando clientes conectados...
echo ================================
netsh wlan show hostednetwork
echo.
echo Presiona Ctrl+C para salir
timeout /t 5 /nobreak >nul
goto monitor
```

### **Ejemplo 9: Configurar red temporal para eventos**
**Prop칩sito**: Crear una red de corta duraci칩n para reuniones o eventos espec칤ficos.

```batch
@echo off
set /p evento="Nombre del evento: "
set /p duracion="Duraci칩n en minutos: "
echo Creando red para evento: %evento%
netsh wlan set hostednetwork mode=allow ssid="Evento_%evento%" key="Evento2024"
netsh wlan start hostednetwork
echo Red activada por %duracion% minutos
timeout /t %duracion% /nobreak >nul
netsh wlan stop hostednetwork
echo Red del evento detenida
pause
```

### **Ejemplo 10: Script de gesti칩n completa**
**Prop칩sito**: Script interactivo para gestionar completamente las redes hospedadas con m칰ltiples opciones.

```batch
@echo off
title Gesti칩n de Redes Hospedadas
color 0A

:menu
cls
echo ========================================
echo    GESTION DE REDES HOSPEDADAS
echo ========================================
echo.
echo 1. Crear nueva red hospedada
echo 2. Iniciar red existente
echo 3. Detener red activa
echo 4. Ver estado de la red
echo 5. Verificar adaptadores
echo 6. Configurar compartir conexi칩n
echo 7. Monitorear clientes
echo 8. Salir
echo.
set /p opcion="Selecciona una opci칩n (1-8): "

if "%opcion%"=="1" goto crear
if "%opcion%"=="2" goto iniciar
if "%opcion%"=="3" goto detener
if "%opcion%"=="4" goto estado
if "%opcion%"=="5" goto adaptadores
if "%opcion%"=="6" goto compartir
if "%opcion%"=="7" goto monitorear
if "%opcion%"=="8" goto salir
goto menu

:crear
cls
echo === CREAR NUEVA RED HOSPEDADA ===
set /p ssid="Nombre de la red (SSID): "
set /p key="Contrase침a (m칤nimo 8 caracteres): "
echo.
echo Configurando red "%ssid%"...
netsh wlan set hostednetwork mode=allow ssid="%ssid%" key="%key%"
if %errorlevel%==0 (
    echo Red configurada exitosamente
    set /p iniciar="쮻eseas iniciar la red ahora? (s/n): "
    if /i "%iniciar%"=="s" goto iniciar
) else (
    echo Error al configurar la red
)
pause
goto menu

:iniciar
cls
echo === INICIAR RED HOSPEDADA ===
netsh wlan start hostednetwork
if %errorlevel%==0 (
    echo Red hospedada iniciada correctamente
) else (
    echo Error al iniciar la red
)
pause
goto menu

:detener
cls
echo === DETENER RED HOSPEDADA ===
netsh wlan stop hostednetwork
if %errorlevel%==0 (
    echo Red hospedada detenida correctamente
) else (
    echo Error al detener la red
)
pause
goto menu

:estado
cls
echo === ESTADO DE LA RED HOSPEDADA ===
netsh wlan show hostednetwork
pause
goto menu

:adaptadores
cls
echo === VERIFICAR ADAPTADORES ===
netsh wlan show drivers | findstr "Hosted network supported"
pause
goto menu

:compartir
cls
echo === CONFIGURAR COMPARTIR CONEXI칍N ===
echo Habilitando compartir de conexi칩n...
netsh interface set interface "Ethernet" sharing=enabled
echo Compartir configurado
pause
goto menu

:monitorear
cls
echo === MONITOREAR CLIENTES ===
echo Presiona Ctrl+C para salir del monitoreo
timeout /t 3 /nobreak >nul
:loop
cls
netsh wlan show hostednetwork
timeout /t 5 /nobreak >nul
goto loop

:salir
echo Gracias por usar el gestor de redes hospedadas
exit
```



## 游눠 Consejos Importantes

### **Optimizaci칩n**
- **Verificar compatibilidad**: Antes de crear una red hospedada, aseg칰rate de que tu adaptador WiFi soporte esta funci칩n
- **Contrase침as seguras**: Usa contrase침as de al menos 8 caracteres con combinaci칩n de letras, n칰meros y s칤mbolos
- **L칤mite de clientes**: Configura un l칤mite razonable de clientes para evitar saturar la red

### **Seguridad**
- **Cambiar contrase침as regularmente**: Actualiza las contrase침as de las redes hospedadas peri칩dicamente
- **Monitorear conexiones**: Revisa regularmente qu칠 dispositivos est치n conectados
- **Desactivar cuando no se use**: Det칠n las redes hospedadas cuando no las necesites

### **Mejores Pr치cticas**
- **Nombres descriptivos**: Usa nombres de red que indiquen claramente el prop칩sito
- **Documentar configuraciones**: Mant칠n un registro de las configuraciones de red
- **Pruebas de conectividad**: Verifica que los clientes puedan acceder a internet correctamente

## 游깴 Casos de Uso Reales

### **Administraci칩n de Sistemas**
- **Puntos de acceso temporales**: Crear redes para eventos corporativos o reuniones
- **Redes de emergencia**: Proporcionar conectividad cuando falla la infraestructura principal
- **Testing de aplicaciones**: Crear entornos de prueba aislados para desarrollo

### **Entornos Educativos**
- **Laboratorios m칩viles**: Configurar redes para clases que requieren conectividad
- **Presentaciones**: Compartir internet durante demostraciones o exposiciones
- **Trabajo colaborativo**: Facilitar la conexi칩n entre dispositivos de estudiantes

### **Empresas**
- **Oficinas temporales**: Configurar conectividad en espacios de trabajo temporales
- **Conferencias**: Proporcionar WiFi para eventos corporativos
- **Backup de conectividad**: Mantener redes de respaldo para casos de emergencia

## 游꿢 Conclusi칩n y Siguiente Paso

춰Excelente! Has dominado la creaci칩n y gesti칩n de redes hospedadas en Windows. Esta habilidad te permitir치 convertir cualquier PC en un punto de acceso WiFi, una competencia muy valorada en administraci칩n de sistemas y soporte t칠cnico.

**쯈u칠 has aprendido?**
- Configurar redes hospedadas con seguridad WPA2
- Gestionar m칰ltiples redes simult치neamente
- Monitorear clientes conectados en tiempo real
- Automatizar la creaci칩n y gesti칩n de redes

**Aplicaciones profesionales:**
- T칠cnico de soporte en empresas
- Administrador de sistemas
- Consultor de redes
- Instructor de TI

En el siguiente cap칤tulo, aprender치s a **enviar mensajes a usuarios** conectados en la red, una habilidad complementaria que te permitir치 comunicarte directamente con los dispositivos conectados a tus redes hospedadas. 춰Prep치rate para dominar la comunicaci칩n en red!

---

## 游닄 Enlaces Relacionados

- [Cap칤tulo 35: Conexiones de red](35.%20Conexiones%20de%20red.md)
- [Cap칤tulo 38: Enviar mensajes a usuarios](38.%20Enviar%20mensajes%20a%20usuarios.md)
- [Cap칤tulo 39: Env칤o de se침ales](39.%20Env칤o%20de%20se침ales.md)

## 游댕 Fuentes y Referencias

- **Microsoft Docs**: [Netsh WLAN Commands](https://docs.microsoft.com/en-us/windows-server/networking/technologies/netsh/netsh-wlan)
- **Windows Networking**: [Hosted Network](https://docs.microsoft.com/en-us/windows/win32/nativewifi/hosted-network)
- **Wi-Fi Alliance**: [WPA2 Security](https://www.wi-fi.org/discover-wi-fi/security)
- **Autor**: [Jerson Mart칤nez](https://jersonmartinez.com)
- **Blog DevOps**: [Crashell](https://crashell.com)

---

## Scripts disponibles

En el directorio `scripts/37-crear-red-hospedada/` encontrar치s los siguientes scripts para crear y gestionar redes hospedadas de manera profesional:

### 游깷 **Gesti칩n de redes hospedadas**
- **`gestor-avanzado-redes-hospedadas.bat`** - Interfaz completa para crear, configurar, monitorear y gestionar redes hospedadas con logging y verificaci칩n de compatibilidad
- **`creacion-masiva-redes.bat`** - Herramienta para crear m칰ltiples redes hospedadas desde archivos de configuraci칩n para eventos o departamentos

### 游늶 **Instrucciones de uso**

1. **Para gesti칩n avanzada de redes:**
   ```batch
   cd scripts\37-crear-red-hospedada
   gestor-avanzado-redes-hospedadas.bat
   ```

2. **Para creaci칩n masiva de redes:**
   - El script crear치 autom치ticamente un archivo `redes_masivas.txt` de ejemplo
   - Edita el archivo con el formato: `SSID|Contrase침a|MaxClientes`
   - Ejecuta: `creacion-masiva-redes.bat`

### 丘멆잺 **Notas importantes**
- Ejecuta estos scripts como administrador
- Verifica que tu adaptador WiFi soporte redes hospedadas
- Usa contrase침as de al menos 8 caracteres
- Los logs se guardan en archivos de texto para auditor칤a

### 游댢 **Caracter칤sticas principales**
- **Verificaci칩n de compatibilidad:** Detecta autom치ticamente si el sistema soporta redes hospedadas
- **Configuraci칩n persistente:** Guarda configuraciones en archivos para reutilizaci칩n
- **Monitoreo en tiempo real:** Seguimiento de clientes conectados y estado de la red
- **Logging completo:** Registra todas las operaciones para auditor칤a y troubleshooting
- **Creaci칩n masiva:** Permite configurar m칰ltiples redes desde archivos de configuraci칩n 